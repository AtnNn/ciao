<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 16 May 2002 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Terms with named arguments -records/feature terms</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_91.html">previous</A>, <A HREF="ciao_93.html">next</A>, <A HREF="ciao_215.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC372" HREF="ciao_toc.html#TOC372">Terms with named arguments -records/feature terms</A></H1>
<P>
<A NAME="IDX4222"></A>


<P>
<STRONG>Author(s):</STRONG> Daniel Cabeza and Manuel Hermenegildo.


<P>
<STRONG>Version:</STRONG> 1.8 (2002/5/16, 21:20:27 CEST)


<P>
<STRONG>Version of last change:</STRONG> 1.7#118 (2001/8/28, 15:7:22 CEST)


<P>
<A NAME="IDX4223"></A>
<A NAME="IDX4224"></A>
This library package provides syntax which allows accessing term arguments by name (these terms are sometimes also referred to as 
<A NAME="IDX4225"></A>
<A NAME="IDX4226"></A>
<EM>records</EM>, and are also similar to 
<A NAME="IDX4227"></A>
<A NAME="IDX4228"></A>
<EM>feature terms</EM> [AKPS92]).



<UL>
<LI><A HREF="ciao_92.html#SEC373">Usage and interface (argnames)</A>
<LI><A HREF="ciao_92.html#SEC374">Documentation on new declarations (argnames)</A>
<LI><A HREF="ciao_92.html#SEC375">Other information (argnames)</A>
<LI><A HREF="ciao_92.html#SEC378">Known bugs and planned improvements (argnames)</A>
</UL>



<H2><A NAME="SEC373" HREF="ciao_toc.html#TOC373">Usage and interface (<CODE>argnames</CODE>)</A></H2>

<div class="cartouche">

<UL>

<LI><STRONG>Library usage:</STRONG>

<CODE>:- use_package(argnames).</CODE>

or

<CODE>:- module(...,...,[argnames]).</CODE>

<LI><STRONG>New operators defined:</STRONG>

<A NAME="IDX4229"></A>
<CODE>$/2</CODE> [150,xfx], 
<A NAME="IDX4230"></A>
<CODE>=&#62;/2</CODE> [950,xfx], 
<A NAME="IDX4231"></A>
<CODE>argnames/1</CODE> [1150,fx].

<LI><STRONG>New declarations defined:</STRONG>

<A NAME="IDX4232"></A>
<CODE>argnames/1</CODE>.

</UL>

</div class="cartouche">



<H2><A NAME="SEC374" HREF="ciao_toc.html#TOC374">Documentation on new declarations (<CODE>argnames</CODE>)</A></H2>
<P>
<A NAME="IDX4233"></A>
<A NAME="IDX4234"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>argnames/1:</B>
<DD><A NAME="IDX4235"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>argnames(ArgNamedPredSpec)</CODE>.

<UL>
<LI><EM>Description:</EM> An

<A NAME="IDX4236"></A>
<CODE>argnames/1</CODE> declaration assigns names to the argument positions of terms (or literal/goals) which use a certain functor/arity. This allows referring to these arguments by their name rather than by their argument position. Sometimes, argument names may be clearer and easier to remember than argument positions, specially for predicates with many arguments. Also, in some cases this may allow adding arguments to certain predicates without having to change the code that uses them. These terms with named arguments are sometimes also referred to as 
<A NAME="IDX4237"></A>
records, and are also similar to 
<A NAME="IDX4238"></A>
feature terms [AKPS92]. For example, in order to write a program for the <EM>zebra</EM> puzzle we might declare: 



<PRE>
:- use_package([argnames]).
:- argnames house(color, nation, pet, drink, car).
</PRE>

which first includes the package and then assigns a name to each of the arguments of any term (or literal/goal) with <CODE>house/5</CODE> as the main functor. 

Once an 
<A NAME="IDX4239"></A>
<CODE>argnames/1</CODE> is given, is possible to use the names to refer to the arguments of any term (or literal/goal) which has the same main functor as that of the term which appears in the 
<A NAME="IDX4240"></A>
<CODE>argnames/1</CODE> declaration. This is done by first writing the functor name, then the infix operator <CODE>$</CODE>, and then, between curly brackets, zero, one, or more pairs <EM>argument-name</EM><CODE>=&#62;</CODE><EM>argument-value</EM>, separated by commas (i.e., the infix operator <CODE>=&#62;</CODE> is used between the name and the value). Again, argument names must be atomic. Argument values can be any term. Arguments which are not specified are assumed to have a value of "<CODE>_</CODE>" (i.e., they are left unconstrained). 

Thus, after the declaration for <CODE>house/5</CODE> in the example above, any ocurrence in that code of, for example, <CODE>house${nation=&#62;Owns_zebra,pet=&#62;zebra}</CODE> is exactly equivalent to <CODE>house(_,Owns_zebra,zebra,_,_)</CODE>. Also, <CODE>house${}</CODE> is equivalent to <CODE>house(_,_,_,_,_)</CODE>. The actual zebra puzzle specification might include a clause such as: 



<PRE>
zebra(Owns_zebra, Drinks_water, Street) :-
   Street = [house${},house${},house${},house${},house${}],
   member(house${nation=&#62;Owns_zebra,pet=&#62;zebra}, Street),
   member(house${nation=&#62;Drinks_water,drink=&#62;water}, Street),
   member(house${drink=&#62;coffee,color=&#62;green}, Street),
   left_right(house${color=&#62;ivory}, house${color=&#62;green}, Street),
   member(house${car=&#62;porsche,pet=&#62;snails}, Street),
        ...
</PRE>

Any number of 
<A NAME="IDX4241"></A>
<CODE>argnames/1</CODE> declarations can appear in a file, one for each functor whose arguments are to be accessed by name. As with other packages, argument name declarations are <EM>local to the file</EM> in which they appear. The 
<A NAME="IDX4242"></A>
<CODE>argnames/1</CODE> declarations affect only program text which appears after the declaration. It is easy to make a set of declarations affect several files for example by putting such declarations in a sepatate file which is included by all such files. 

An 
<A NAME="IDX4243"></A>
<CODE>argnames/1</CODE> declaration does not change in any way the internal representation of the associated terms and does not affect run-time efficiency. It is simply syntactic sugar. 

 
</UL>

</DL>



<H2><A NAME="SEC375" HREF="ciao_toc.html#TOC375">Other information (<CODE>argnames</CODE>)</A></H2>

<P>
 


<P>
Two simple examples of the use of the argnames library package follow. 



<UL>
<LI><A HREF="ciao_92.html#SEC376">Using argument names in a toy database</A>
<LI><A HREF="ciao_92.html#SEC377">Complete code for the zebra example</A>
</UL>



<H3><A NAME="SEC376" HREF="ciao_toc.html#TOC376">Using argument names in a toy database</A></H3>

<P>



<PRE>
:- module(simple_db,_,[argnames,assertions,regtypes]).
:- use_module(library(aggregates)).

:- comment(title,"A simple database application using argument names").

:- pred product/4 :: int * string * string * int.

:- argnames 
product( id,    description,    brand,          quantity        ).
%       ----------------------------------------------------------
product(  1,    "Keyboard",     "Logitech",     6               ).
product(  2,    "Mouse",        "Logitech",     5               ).
product(  3,    "Monitor",      "Philips",      3               ).
product(  4,    "Laptop",       "Dell",         4               ).

% Compute the stock of products from a given brand.
% Note call to findall is equivalent to: findall(Q,product(_,_,Brand,Q),L).
brand_stock(Brand,Stock) :-
        findall(Q,product${brand=&#62;Brand,quantity=&#62;Q},L),
        sumlist(L,Stock).

sumlist([],0).
sumlist([X|T],S) :- 
        sumlist(T,S1),
        S is X + S1.

</PRE>



<H3><A NAME="SEC377" HREF="ciao_toc.html#TOC377">Complete code for the zebra example</A></H3>

<P>



<PRE>
:- module(_,zebra/3,[argnames]).

/*     There are five consecutive houses, each of a different
color and inhabited by men of different nationalities. They each
own a different pet, have a different favorite drink, and drive a
different car.

1.   The Englishman lives in the red house.
2.   The Spaniard owns the dog.
3.   Coffee is drunk in the green house.
4.   The Ukrainian drinks tea.
5.   The green house is immediately to the right of the ivory
     house.
6.   The Porsche driver owns snails.
7.   The Masserati is driven by the man who lives in the yellow
     house.
8.   Milk is drunk in the middle house.
9.   The Norwegian lives in the first house on the left.
10.  The man who drives a Saab lives in the house next to the man
     with the fox.
11.  The Masserati is driven by the man in the house next to the
     house where the horse is kept.
12.  The Honda driver drinks orange juice.
13.  The Japanese drives a Jaguar.
14.  The Norwegian lives next to the blue house.

The problem is: Who owns the Zebra?  Who drinks water?
*/

:- argnames house(color, nation, pet, drink, car).

zebra(Owns_zebra, Drinks_water, Street) :-
        Street = [house${},house${},house${},house${},house${}],
        member(house${nation =&#62; Owns_zebra, pet =&#62; zebra}, Street),
        member(house${nation =&#62; Drinks_water, drink =&#62; water}, Street),
        member(house${nation =&#62; englishman, color =&#62; red}, Street),
        member(house${nation =&#62; spaniard, pet =&#62; dog}, Street),
        member(house${drink =&#62; coffee, color =&#62; green}, Street),
        member(house${nation =&#62; ukrainian, drink =&#62; tea}, Street),
        left_right(house${color =&#62; ivory}, house${color =&#62; green}, Street),
        member(house${car =&#62; porsche, pet =&#62; snails}, Street),
        member(house${car =&#62; masserati, color =&#62; yellow}, Street),
        Street = [_, _, house${drink =&#62; milk}, _, _],
        Street = [house${nation =&#62; norwegian}|_],
        next_to(house${car =&#62; saab}, house${pet =&#62; fox}, Street),
        next_to(house${car =&#62; masserati}, house${pet =&#62; horse}, Street),
        member(house${car =&#62; honda, drink =&#62; orange_juice}, Street),
        member(house${nation =&#62; japanese, car =&#62; jaguar}, Street),
        next_to(house${nation =&#62; norwegian}, house${color =&#62; blue}, Street).

member(X,[X|_]).
member(X,[_|Y]) :- member(X,Y).

left_right(L,R,[L,R|_]).
left_right(L,R,[_|T]) :- left_right(L,R,T).

next_to(X,Y,L) :- left_right(X,Y,L).
next_to(X,Y,L) :- left_right(Y,X,L).

</PRE>



<H2><A NAME="SEC378" HREF="ciao_toc.html#TOC378">Known bugs and planned improvements (<CODE>argnames</CODE>)</A></H2>


<UL>

<LI>

It would be nice to add a mechanism to portray terms with named arguments in a special (user definable) way.
</UL>

<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_91.html">previous</A>, <A HREF="ciao_93.html">next</A>, <A HREF="ciao_215.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
