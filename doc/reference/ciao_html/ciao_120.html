<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 5 October 2004 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Foreign Language Interface Properties</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_119.html">previous</A>, <A HREF="ciao_121.html">next</A>, <A HREF="ciao_243.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC494" HREF="ciao_toc.html#TOC494">Foreign Language Interface Properties</A></H1>
<P>
<A NAME="IDX5627"></A>


<P>
<STRONG>Author(s):</STRONG> Jose Morales, Manuel Carro.


<P>
<STRONG>Version:</STRONG> 1.11#222 (2004/5/24, 13:8:7 CEST)


<P>
<STRONG>Version of last change:</STRONG> 1.11#216 (2004/3/26, 20:8:6 CET)


<P>
The foreign language interface uses some properties to specify linking regimes, foreign files to be compiled, types of data available, memory allocation policies, etc.



<UL>
<LI><A HREF="ciao_120.html#SEC495">Usage and interface (foreign_interface_properties)</A>
<LI><A HREF="ciao_120.html#SEC496">Documentation on exports (foreign_interface_properties)</A>
<LI><A HREF="ciao_120.html#SEC497">Documentation on internals (foreign_interface_properties)</A>
<LI><A HREF="ciao_120.html#SEC498">Known bugs and planned improvements (foreign_interface_properties)</A>
</UL>



<H2><A NAME="SEC495" HREF="ciao_toc.html#TOC495">Usage and interface (<CODE>foreign_interface_properties</CODE>)</A></H2>

<div class="cartouche">

<UL>

<LI><STRONG>Library usage:</STRONG>

<CODE>:- use_module(library(foreign_interface_properties)).</CODE>

<LI><STRONG>Exports:</STRONG>


<UL>

<LI><EM>Properties:</EM>

<A NAME="IDX5628"></A>
<CODE>native/1</CODE>, 
<A NAME="IDX5629"></A>
<CODE>native/2</CODE>, 
<A NAME="IDX5630"></A>
<CODE>size_of/3</CODE>, 
<A NAME="IDX5631"></A>
<CODE>foreign/1</CODE>, 
<A NAME="IDX5632"></A>
<CODE>foreign/2</CODE>, 
<A NAME="IDX5633"></A>
<CODE>returns/2</CODE>, 
<A NAME="IDX5634"></A>
<CODE>do_not_free/2</CODE>.

<LI><EM>Regular Types:</EM>

<A NAME="IDX5635"></A>
<CODE>int_list/1</CODE>, 
<A NAME="IDX5636"></A>
<CODE>byte_list/1</CODE>, 
<A NAME="IDX5637"></A>
<CODE>byte/1</CODE>, 
<A NAME="IDX5638"></A>
<CODE>null/1</CODE>, 
<A NAME="IDX5639"></A>
<CODE>address/1</CODE>, 
<A NAME="IDX5640"></A>
<CODE>any_term/1</CODE>.

</UL>

</UL>

</div class="cartouche">



<H2><A NAME="SEC496" HREF="ciao_toc.html#TOC496">Documentation on exports (<CODE>foreign_interface_properties</CODE>)</A></H2>
<P>
<A NAME="IDX5641"></A>
<A NAME="IDX5642"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>int_list/1:</B>
<DD><A NAME="IDX5643"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>int_list(List)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>List</CODE> is a list of integers.

</UL>

</DL>

<P>
<A NAME="IDX5644"></A>
<A NAME="IDX5645"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>byte_list/1:</B>
<DD><A NAME="IDX5646"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>byte_list(List)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>List</CODE> is a list of bytes.

</UL>

</DL>

<P>
<A NAME="IDX5647"></A>
<A NAME="IDX5648"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>byte/1:</B>
<DD><A NAME="IDX5649"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>byte(Byte)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Byte</CODE> is a byte.

</UL>

</DL>

<P>
<A NAME="IDX5650"></A>
<A NAME="IDX5651"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>null/1:</B>
<DD><A NAME="IDX5652"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>null(Address)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Address</CODE> is a null adress.

</UL>

</DL>

<P>
<A NAME="IDX5653"></A>
<A NAME="IDX5654"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>address/1:</B>
<DD><A NAME="IDX5655"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>address(Address)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Address</CODE> is a memory address.

</UL>

</DL>

<P>
<A NAME="IDX5656"></A>
<A NAME="IDX5657"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>any_term/1:</B>
<DD><A NAME="IDX5658"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>any_term(X)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>X</CODE> is any term. The foreign interface passes it to C functions as a general term.

</UL>

</DL>

<P>
<A NAME="IDX5659"></A>
<A NAME="IDX5660"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>native/1:</B>
<DD><A NAME="IDX5661"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>native(Name)</CODE>

<UL>
<LI><EM>Description:</EM> The Prolog predicate

<A NAME="IDX5662"></A>
<CODE>Name</CODE> is implemented using the function <CODE>Name</CODE>. The implementation is not a common C one, but it accesses directly the internal Ciao Prolog data structures and functions, and therefore no glue code is generated for it. 
</UL>

</DL>

<P>
<A NAME="IDX5663"></A>
<A NAME="IDX5664"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>native/2:</B>
<DD><A NAME="IDX5665"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>native(PrologName, ForeignName)</CODE>

<UL>
<LI><EM>Description:</EM> The Prolog predicate

<A NAME="IDX5666"></A>
<CODE>PrologName</CODE> is implemented using the function <CODE>ForeignName</CODE>. The same considerations as above example are to be applied. 
</UL>

</DL>

<P>
<A NAME="IDX5667"></A>
<A NAME="IDX5668"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>size_of/3:</B>
<DD><A NAME="IDX5669"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>size_of(Name, ListVar, SizeVar)</CODE>

<UL>
<LI><EM>Description:</EM> For predicate <CODE>Name</CODE>, the size of the argument of type

<A NAME="IDX5670"></A>
<CODE>byte_list/1</CODE>, <CODE>ListVar</CODE>, is given by the argument of type integer <CODE>SizeVar</CODE>. 
</UL>

</DL>

<P>
<A NAME="IDX5671"></A>
<A NAME="IDX5672"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>foreign/1:</B>
<DD><A NAME="IDX5673"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>foreign(Name)</CODE>

<UL>
<LI><EM>Description:</EM> The Prolog predicate

<A NAME="IDX5674"></A>
<CODE>Name</CODE> is implemented using the foreign function <CODE>Name</CODE>. 
</UL>

</DL>

<P>
<A NAME="IDX5675"></A>
<A NAME="IDX5676"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>foreign/2:</B>
<DD><A NAME="IDX5677"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>foreign(PrologName, ForeignName)</CODE>

<UL>
<LI><EM>Description:</EM> The Prolog predicate

<A NAME="IDX5678"></A>
<CODE>PrologName</CODE> is implemented using the foreign function <CODE>ForeignName</CODE>. 
</UL>

</DL>

<P>
<A NAME="IDX5679"></A>
<A NAME="IDX5680"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>returns/2:</B>
<DD><A NAME="IDX5681"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>returns(Name, Var)</CODE>

<UL>
<LI><EM>Description:</EM> The result of the foreign function that implements the Prolog predicate

<A NAME="IDX5682"></A>
<CODE>Name</CODE> is unified with the Prolog variable <CODE>Var</CODE>. Cannot be used without 
<A NAME="IDX5683"></A>
<CODE>foreign/1</CODE> or 
<A NAME="IDX5684"></A>
<CODE>foreign/2</CODE>. 
</UL>

</DL>

<P>
<A NAME="IDX5685"></A>
<A NAME="IDX5686"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>do_not_free/2:</B>
<DD><A NAME="IDX5687"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>do_not_free(Name, Var)</CODE>

<UL>
<LI><EM>Description:</EM> For predicate <CODE>Name</CODE>, the C argument passed to (returned from) the foreign function will not be freed after calling the foreign function.

</UL>

</DL>



<H2><A NAME="SEC497" HREF="ciao_toc.html#TOC497">Documentation on internals (<CODE>foreign_interface_properties</CODE>)</A></H2>
<P>
<A NAME="IDX5688"></A>
<A NAME="IDX5689"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_foreign_source/1:</B>
<DD><A NAME="IDX5690"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_foreign_source(Files)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Files</CODE> is the (list of) foreign file(s) that will be linked with the glue-code file.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Files</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5691"></A>
<A NAME="IDX5692"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_foreign_source/2:</B>
<DD><A NAME="IDX5693"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_foreign_source(OsArch, Files)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Files</CODE> are the OS and architecture dependant foreign files. This allows compiling and linking different files depending on the O.S. and architecture.

<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Files</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5694"></A>
<A NAME="IDX5695"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_foreign_library/1:</B>
<DD><A NAME="IDX5696"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_foreign_library(Libs)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Libs</CODE> is the (list of) external library(es) needed to link the C files. Only the short name of the library (i.e., what would follow the <CODE>-l</CODE> in the linker is needed.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Libs</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5697"></A>
<A NAME="IDX5698"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_foreign_library/2:</B>
<DD><A NAME="IDX5699"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_foreign_library(OsArch, Libs)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Libs</CODE> are the OS and architecture dependant libraries.

<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Libs</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5700"></A>
<A NAME="IDX5701"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>extra_compiler_opts/1:</B>
<DD><A NAME="IDX5702"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>extra_compiler_opts(Opts)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Opts</CODE> is the list of additional compiler options (e.g., optimization options) that will be used during the compilation.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Opts</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5703"></A>
<A NAME="IDX5704"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>extra_compiler_opts/2:</B>
<DD><A NAME="IDX5705"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>extra_compiler_opts(OsArch, Opts)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Opts</CODE> are the OS and architecture dependant additional compiler options.

<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Opts</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5706"></A>
<A NAME="IDX5707"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_compiler/1:</B>
<DD><A NAME="IDX5708"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_compiler(Compiler)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Compiler</CODE> is the compiler to use in this file. When this option is used, the default (Ciao-provided) compiler options are not used; those specified in

<A NAME="IDX5709"></A>
<CODE>extra_compiler_options</CODE> are used instead. 
<LI><EM>The following properties hold at call time:</EM>

<CODE>Compiler</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5710"></A>
<A NAME="IDX5711"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_compiler/2:</B>
<DD><A NAME="IDX5712"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_compiler(OsArch, Compiler)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Compiler</CODE> is the compiler to use in this file when compiling for the architecture <CODE>OsArch</CODE>. The option management is the same as in

<A NAME="IDX5713"></A>
<CODE>use_compiler/2</CODE>. 
<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Compiler</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5714"></A>
<A NAME="IDX5715"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>extra_linker_opts/1:</B>
<DD><A NAME="IDX5716"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>extra_linker_opts(Opts)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Opts</CODE> is the list of additional linker options that will be used during the linkage.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Opts</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5717"></A>
<A NAME="IDX5718"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>extra_linker_opts/2:</B>
<DD><A NAME="IDX5719"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>extra_linker_opts(OsArch, Opts)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Opts</CODE> are the OS and architecture dependant additional linker options.

<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Opts</CODE> is an atom or a list of atoms.
 (<CODE>basic_props:atm_or_atm_list/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5720"></A>
<A NAME="IDX5721"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_linker/1:</B>
<DD><A NAME="IDX5722"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_linker(Linker)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Linker</CODE> is the linker to use in this file. When this option is used, the default (Ciao-provided) linker options are not used; those specified in

<A NAME="IDX5723"></A>
<CODE>extra_linker_options/1</CODE> are used instead. 
<LI><EM>The following properties hold at call time:</EM>

<CODE>Linker</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5724"></A>
<A NAME="IDX5725"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>use_linker/2:</B>
<DD><A NAME="IDX5726"></A>


<P>
<STRONG>Usage:</STRONG> :- <CODE>use_linker(OsArch, Linker)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Compiler</CODE> is the linker to use in this file when compiling for the architecture <CODE>OsArch</CODE>. The option management is the same as in

<A NAME="IDX5727"></A>
<CODE>use_compiler/2</CODE>. 
<LI><EM>The following properties hold at call time:</EM>

<CODE>OsArch</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)

<CODE>Linker</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX5728"></A>
<A NAME="IDX5729"></A>
<DL>
<DT><span class="define">DECLARATION:</span> <B>foreign_inline/2:</B>
<DD><A NAME="IDX5730"></A>


<P>
<STRONG>Usage 1:</STRONG> :- <CODE>foreign_inline(Term, Text)</CODE>.

<UL>
<LI><EM>Description:</EM> <CODE>Term</CODE> is a predicate name. <CODE>Text</CODE> is a source C code that define the predicate <CODE>Term</CODE>. <CODE>Term</CODE> is present for future use with the analyzers. Example of this can be viewed in the hrtimer library.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Term</CODE> is a Name/Arity structure denoting a predicate name: 

<PRE>
predname(P/A) :-
        atm(P),
        nnegint(A).
</PRE>

 (<CODE>basic_props:predname/1</CODE>)

<CODE>Text</CODE> is a string (a list of character codes).
 (<CODE>basic_props:string/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> :- <CODE>foreign_inline(Term, Text)</CODE>.

<UL>
<LI><EM>Description:</EM> This usage of foreign_inline is to add globally the C source code that are in <CODE>Text</CODE>.

<LI><EM>The following properties hold at call time:</EM>

<CODE>Term</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Text</CODE> is a string (a list of character codes).
 (<CODE>basic_props:string/1</CODE>)
</UL>

</DL>



<H2><A NAME="SEC498" HREF="ciao_toc.html#TOC498">Known bugs and planned improvements (<CODE>foreign_interface_properties</CODE>)</A></H2>


<UL>

<LI>

The <CODE>size_of/3</CODE> property has an empty definition
</UL>

<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_119.html">previous</A>, <A HREF="ciao_121.html">next</A>, <A HREF="ciao_243.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
