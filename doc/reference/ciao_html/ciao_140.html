<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 26 January 2000 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Installing Ciao</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_139.html">previous</A>, <A HREF="ciao_141.html">next</A>, <A HREF="ciao_148.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC482" HREF="ciao_toc.html#TOC482">Installing Ciao</A></H1>

<P>
<STRONG>Author(s):</STRONG> Manuel Carro, Daniel Cabeza, Manuel Hermenegildo.


<P>
<STRONG>Version:</STRONG> 1.5#1 (1999/11/29, 17:12:34 MET)


<P>
<STRONG>Version of last change:</STRONG> 1.3#117 (1999/11/25, 1:44:7 MET)


<P>
 This describes the installation procedure for the Ciao Prolog system, including libraries and manuals. Please read section <A HREF="ciao_140.html#SEC483">Un*x installation summary</A> and section <A HREF="ciao_140.html#SEC484">Un*x full installation instructions</A> for the installation procedures from sources on Un*x (Linux, SunOS, Solaris, etc.) machines. Windows NT/95/98 users are referred to section <A HREF="ciao_140.html#SEC485">Installation and compilation under Windows</A> and section <A HREF="ciao_140.html#SEC486">Windows installation from the precompiled distribution</A>. 


<P>
If you find any problems during installation, please refer to section <A HREF="ciao_140.html#SEC504">Troubleshooting (nasty messages and nifty workarounds)</A>. 
<A NAME="IDX5062"></A>
<A NAME="IDX5063"></A>
See also section <A HREF="ciao_140.html#SEC500">Downloading new versions</A> and section <A HREF="ciao_140.html#SEC502">Reporting bugs</A>. 



<UL>
<LI><A HREF="ciao_140.html#SEC483">Un*x installation summary</A>
<LI><A HREF="ciao_140.html#SEC484">Un*x full installation instructions</A>
<LI><A HREF="ciao_140.html#SEC485">Installation and compilation under Windows</A>
<LI><A HREF="ciao_140.html#SEC486">Windows installation from the precompiled distribution</A>
<LI><A HREF="ciao_140.html#SEC494">Windows installation from the standard source distribution</A>
<LI><A HREF="ciao_140.html#SEC495">Checking for correct installation</A>
<LI><A HREF="ciao_140.html#SEC496">Cleaning up the source directory</A>
<LI><A HREF="ciao_140.html#SEC497">Environment variables used by Ciao executables</A>
<LI><A HREF="ciao_140.html#SEC498">Multiarchitecture support</A>
<LI><A HREF="ciao_140.html#SEC499">Architecture specific notes and limitations</A>
<LI><A HREF="ciao_140.html#SEC500">Downloading new versions</A>
<LI><A HREF="ciao_140.html#SEC502">Reporting bugs</A>
<LI><A HREF="ciao_140.html#SEC503">Porting to currently unsupported operating systems</A>
<LI><A HREF="ciao_140.html#SEC504">Troubleshooting (nasty messages and nifty workarounds)</A>
</UL>



<H2><A NAME="SEC483" HREF="ciao_toc.html#TOC483">Un*x installation summary</A></H2>
<P>
<A NAME="IDX5064"></A>
<A NAME="IDX5065"></A>


<P>
<STRONG>Note:</STRONG> it is recommended that you read the full installation instructions (specially if the installation will be shared by different architectures). However, in many cases it suffices to follow this summary: 



<OL>

<LI>Uncompress and unpackage (using

<A NAME="IDX5066"></A>
<CODE>gunzip</CODE> and <CODE>tar -xpf</CODE>) the distribution. This will put everyting in a new directory whose name reflects the Ciao version. 

<LI>Enter the newly created directory (<CODE>SRC</CODE>). Edit

<A NAME="IDX5067"></A>
<CODE>SETTINGS</CODE> and check/set the variables <CODE>SRC</CODE>, <CODE>BINROOT</CODE> (where the executables will go), <CODE>LIBROOT</CODE> (where the libraries will go), and <CODE>DOCROOT</CODE> (where the documentation will go, preferably a directory <EM>accessible via</EM> 
<A NAME="IDX5068"></A>
WWW). 

<LI>Type <CODE>gmake install</CODE>. This will build executables, compile libraries, and install everything in a directory <CODE>LIBROOT/ciao</CODE> and in <CODE>BINROOT</CODE>.

Note that <CODE>gmake</CODE> refers to the 
<A NAME="IDX5069"></A>
GNU implementation of the 
<A NAME="IDX5070"></A>
make Un*x command, which is available in many systems (including all Linux systems) simply as 
<A NAME="IDX5071"></A>
<CODE>make</CODE>. I.e., you can try simply typing <CODE>make install</CODE> if <CODE>gmake install</CODE> does not work. If typing <CODE>make</CODE> stops right away with error messages it is probably an older version and you need to install <CODE>gmake</CODE>. 

<LI>Make the following modifications in your startup scripts. If you are installing Ciao globally in a multi-user machine, make sure that you instruct all users to do the same. This will make the documentation accessible, set the correct mode when opening Ciao source files in

<A NAME="IDX5072"></A>
<CODE>emacs</CODE>, etc. (&#60;LIBROOT&#62; must be replaced by the appropriate value): 
<A NAME="IDX5073"></A>
<A NAME="IDX5074"></A>

 

<UL>

<LI>For users a

<A NAME="IDX5075"></A>
<A NAME="IDX5076"></A>
<EM>csh-compatible shell</EM> (
<A NAME="IDX5077"></A>
<CODE>csh</CODE>, 
<A NAME="IDX5078"></A>
<CODE>tcsh</CODE>, ...), add to 
<A NAME="IDX5079"></A>
<CODE>~/.cshrc</CODE>: 


<PRE>
        if ( -e &#60;LIBROOT&#62;/ciao/DOTcshrc ) then
           source &#60;LIBROOT&#62;/ciao/DOTcshrc
        endif
</PRE>

<LI>For users of an

<A NAME="IDX5080"></A>
<A NAME="IDX5081"></A>
<EM>sh-compatible shell</EM> (
<A NAME="IDX5082"></A>
<CODE>sh</CODE>, 
<A NAME="IDX5083"></A>
<CODE>bash</CODE>, ...), add to 
<A NAME="IDX5084"></A>
<CODE>~/.profile</CODE>: 


<PRE>
        if [ -f &#60;LIBROOT&#62;/ciao/DOTprofile ]; then
           . &#60;LIBROOT&#62;/ciao/DOTprofile
        fi
</PRE>

This will set up things so that the Ciao executables are found and you can access the Ciao system manuals using the 
<A NAME="IDX5085"></A>
<CODE>info</CODE> command. 

<LI>Also, if you use

<A NAME="IDX5086"></A>
<CODE>emacs</CODE> (highly recommended) add this line to your 
<A NAME="IDX5087"></A>
<CODE>~/.emacs</CODE> file: 


<PRE>
        (load-file "&#60;LIBROOT&#62;/ciao/DOTemacs")
</PRE>

</UL>

If you are the system administrator, the previous steps can be done once and for all, and globally for all users by including the lines above in the central startup scripts (e.g., in Linux 
<A NAME="IDX5088"></A>
<CODE>/etc/cshrc</CODE>/
<A NAME="IDX5089"></A>
<CODE>/etc/csh.cshrc</CODE>, 
<A NAME="IDX5090"></A>
<CODE>/etc/bashrc</CODE>, 
<A NAME="IDX5091"></A>
<CODE>/usr/share/emacs/.../lisp/site-init.pl</CODE>, etc.). 

<LI>Downloading the emacs editor, if it is not available in the system, is highly recommended (see section <A HREF="ciao_140.html#SEC484">Un*x full installation instructions</A>).

<LI>You may want to read now section <A HREF="ciao_140.html#SEC495">Checking for correct installation</A> and the documentation, which is stored in <CODE>DOCROOT</CODE> (copied from <CODE>SRC/doc/reference</CODE>) and can be easily accessed as explained in that same section.

<LI>If you have any problems you may want to check the rest of the instructions. The system can be <STRONG>uninstalled</STRONG> by typing <CODE>gmake uninstall</CODE>.

<A NAME="IDX5092"></A>
<A NAME="IDX5093"></A>

</OL>

<P>
 




<H2><A NAME="SEC484" HREF="ciao_toc.html#TOC484">Un*x full installation instructions</A></H2>
<P>
<A NAME="IDX5094"></A>
<A NAME="IDX5095"></A>



<OL>

<LI><STRONG>Uncompress and unpackage:</STRONG> (using

<A NAME="IDX5096"></A>
<CODE>gunzip</CODE> and <CODE>tar -xpf</CODE>) 
<A NAME="IDX5097"></A>
<A NAME="IDX5098"></A>
the distribution in a suitable directory. This will create a new directory called <CODE>ciao-X.Y</CODE>, where <CODE>X.Y</CODE> is the version number of the distribution. The <CODE>-p</CODE> option in the 
<A NAME="IDX5099"></A>
<CODE>tar</CODE> command ensures that the relative dates of the files in the package are preserved, which is needed for correct operation of the Makefiles. 

<LI><STRONG>Select Installation Options:</STRONG> Edit the file

<A NAME="IDX5100"></A>
<CODE>SETTINGS</CODE> and set the following variables: 


<UL>

<LI><CODE>SRC</CODE>: directory where the sources are stored.

<A NAME="IDX5101"></A>
<A NAME="IDX5102"></A>

<LI><CODE>BINROOT</CODE>: directory where the Ciao executables will go. For example, if <CODE>BINROOT=/usr/local/bin</CODE>, then the Ciao

<A NAME="IDX5103"></A>
compiler (
<A NAME="IDX5104"></A>
<CODE>ciaoc</CODE>) will be stored at <CODE>/usr/local/bin/ciaoc</CODE> (actually, it will be a link to <CODE>ciaoc-</CODE><EM>VersionNumber</EM> --this applies also to other executables below and is done so that several versions can coexist). 
<A NAME="IDX5105"></A>
<A NAME="IDX5106"></A>

<LI><CODE>LIBROOT</CODE>: directory where the

<A NAME="IDX5107"></A>
run-time libraries will be installed. 
<A NAME="IDX5108"></A>
<A NAME="IDX5109"></A>
The Ciao installation procedure will create a new subdirectory <CODE>ciao</CODE> below <CODE>LIBROOT</CODE> and a subdirectory below this one for each Ciao version installed. For example, if <CODE>LIBROOT=/usr/local/lib</CODE> and you have Ciao version <CODE>x.y</CODE>, then the libraries will be installed under <CODE>/usr/local/lib/ciao/ciao-x.y</CODE>. This allows you to install 
<A NAME="IDX5110"></A>
site-specific programs under <CODE>/usr/local/lib/ciao</CODE> and they will not be overwritten if a new version of Ciao is installed. It also allows having several Ciao versions installed simultaneously (the <EM>last one installed</EM> will be used by default when typing <CODE>ciao</CODE>). 

<LI><CODE>DOCROOT</CODE>: directory where the

<A NAME="IDX5111"></A>
manuals will be installed. It is often convenient of this directory is accessible via 
<A NAME="IDX5112"></A>
WWW (<CODE>DOCROOT=/home/httpd/html/ciao</CODE>, or something like that). 

</UL>

For network-based installations, 
<A NAME="IDX5113"></A>
<A NAME="IDX5114"></A>
it is of <EM>utmost importance</EM> that the paths given be reachable in all the networked machines. Different machines with different architectures can share the same physical <CODE>SRC</CODE> directory during installation, since compilations for different architectures take place in dedicated subdirectories. Also, different machines/architectures can share the same <CODE>LIBROOT</CODE> directory. This saves space since the architecture independent libraries will be shared. See section <A HREF="ciao_140.html#SEC498">Multiarchitecture support</A> below. 

<LI><STRONG>Compile Ciao:</STRONG> At the ciao top level directory type <CODE>gmake all</CODE>.

<EM>Important:</EM> use 
<A NAME="IDX5115"></A>
GNU make (
<A NAME="IDX5116"></A>
<CODE>gmake</CODE>), not the standard 
<A NAME="IDX5117"></A>
UNIX make, as the latter does not support some features used during the compilation. It does not matter if the name of the executable is 
<A NAME="IDX5118"></A>
<CODE>make</CODE> or 
<A NAME="IDX5119"></A>
<CODE>gmake</CODE>: only make sure that it is GNU make. 

This will: 


<UL>

<LI>Build an

<A NAME="IDX5120"></A>
engine in <CODE>$(SRC)/bin/$(CIAOARCH)</CODE>, where <CODE>$(CIAOARCH)</CODE> depends on the architecture. The engine is the actual interpreter of the low level code into which Ciao Prolog programs are compiled. 

<LI>Build a new Ciao

<A NAME="IDX5121"></A>
standalone compiler (
<A NAME="IDX5122"></A>
<CODE>ciaoc</CODE>), with the default paths set for your local configuration (nonetheless, these can be overridden by environment variables, as described below). 

<LI>Precompile all the libraries under <CODE>$(SRC)/lib</CODE> and <CODE>$(SRC)/library</CODE> using this compiler.

<LI>Compile a toplevel

<A NAME="IDX5123"></A>
Prolog shell and a shell for 
<A NAME="IDX5124"></A>
Prolog scripts, 
<A NAME="IDX5125"></A>
<A NAME="IDX5126"></A>
under the <CODE>$(SRC)/shell</CODE> directory. 

<LI>Compile some small, auxiliary applications (contained in the

<A NAME="IDX5127"></A>
<CODE>etc</CODE> directory, and documented in the part of the manual on 'Miscellaneous Standalone Utilities'). 

</UL>

This step can be repeated successively for several architectures in the same source directory. Only the engine and some small parts of the libraries (those written in 
<A NAME="IDX5128"></A>
C) differ from one architecture to the other. Standard Ciao Prolog code compiles into 
<A NAME="IDX5129"></A>
bytecode object files (<CODE>.po</CODE>) and/or 
<A NAME="IDX5130"></A>
executables which are portable among machines of different architecture, provided there is an executable engine accessible in every such machine. See more details below under section <A HREF="ciao_140.html#SEC498">Multiarchitecture support</A>. 
 
<LI><STRONG>Check compilation:</STRONG> If the above steps have been satisfactorily finished, the compiler has compiled itself and all the distribution modules, and very probably everything is fine. To further check this before final installation you can type <CODE>gmake test</CODE>, which will compile and execute a small program containing several tests.

<LI><STRONG>Install Ciao:</STRONG> To install Ciao in the directories selected in the file

<A NAME="IDX5131"></A>
<CODE>SETTINGS</CODE> during step 2 above, type <CODE>gmake justinstall</CODE>. This will: 


<UL>

<LI>Install the executables of the Ciao

<A NAME="IDX5132"></A>
program development tools (i.e., the general driver/top-level 
<A NAME="IDX5133"></A>
<CODE>ciao</CODE>, the standalone compiler 
<A NAME="IDX5134"></A>
<CODE>ciaoc</CODE>, the script interpreter 
<A NAME="IDX5135"></A>
<CODE>ciao-shell</CODE>, miscellaneous utilities, etc.) in <CODE>BINROOT</CODE> (see below). In order to use these tools, the <CODE>PATH</CODE> 
<A NAME="IDX5136"></A>
<A NAME="IDX5137"></A>
<A NAME="IDX5138"></A>
environment variable of users needs to contain the path <CODE>BINROOT</CODE>. 

<LI>Install the Ciao libraries under <CODE>LIBROOT/ciao</CODE> (these will be automatically found).

<LI>Install under <CODE>DOCROOT</CODE> the Ciao manuals in several formats (such as GNU <CODE>info</CODE>, <CODE>html</CODE>, <CODE>postscript</CODE>, etc.), depending on the distribution. In order for these manuals to be found when typing <CODE>M-x info</CODE> within

<A NAME="IDX5139"></A>
<CODE>emacs</CODE>, or by the standalone 
<A NAME="IDX5140"></A>
<CODE>info</CODE> and 
<A NAME="IDX5141"></A>
<CODE>man</CODE> commands, the <CODE>MANPATH</CODE> 
<A NAME="IDX5142"></A>
<A NAME="IDX5143"></A>
and <CODE>INFOPATH</CODE> 
<A NAME="IDX5144"></A>
<A NAME="IDX5145"></A>
<A NAME="IDX5146"></A>
environment variables of users both need to contain the path <CODE>DOCROOT</CODE>. 

<LI>Install under <CODE>LIBROOT/ciao</CODE> the Ciao GNU

<A NAME="IDX5147"></A>
<CODE>emacs</CODE> interface (
<A NAME="IDX5148"></A>
<CODE>ciao.el</CODE>, which provides an interactive interface to the Ciao program development tools, as well as some other auxiliary files) and a file 
<A NAME="IDX5149"></A>
<CODE>DOTemacs</CODE> containing the 
<A NAME="IDX5150"></A>
<CODE>emacs</CODE> initialization commands which are needed in order to use the Ciao 
<A NAME="IDX5151"></A>
<CODE>emacs</CODE> interface. 

</UL>

<LI><STRONG>Set up user environments:</STRONG> In order to automate the process of setting the variables above, the installation process leaves the files <CODE>LIBROOT/ciao/DOTcshrc</CODE> (for

<A NAME="IDX5152"></A>
<CODE>csh</CODE>-like shells), <CODE>LIBROOT/ciao/DOTprofile</CODE> (for 
<A NAME="IDX5153"></A>
<CODE>sh</CODE>-like shells), and <CODE>LIBROOT/ciao/DOTemacs</CODE> (for emacs) with appropriate definitions which will take care of all needed 
<A NAME="IDX5154"></A>
environment variable definitions and 
<A NAME="IDX5155"></A>
emacs mode setup. Thus, if you are installing in a multi-user machine, make sure that you instruct all users to make the following modifications in their startup scripts or that you follow these instructions yourself if you are installing Ciao only for your personal use (&#60;LIBROOT&#62; must be replaced by the appropriate value): 

 

<UL>

<LI>For users a

<A NAME="IDX5156"></A>
<A NAME="IDX5157"></A>
<EM>csh-compatible shell</EM> (
<A NAME="IDX5158"></A>
<CODE>csh</CODE>, 
<A NAME="IDX5159"></A>
<CODE>tcsh</CODE>, ...), add to 
<A NAME="IDX5160"></A>
<CODE>~/.cshrc</CODE>: 


<PRE>
        if ( -e &#60;LIBROOT&#62;/ciao/DOTcshrc ) then
           source &#60;LIBROOT&#62;/ciao/DOTcshrc
        endif
</PRE>

<LI>For users of an

<A NAME="IDX5161"></A>
<A NAME="IDX5162"></A>
<EM>sh-compatible shell</EM> (
<A NAME="IDX5163"></A>
<CODE>sh</CODE>, 
<A NAME="IDX5164"></A>
<CODE>bash</CODE>, ...), add to 
<A NAME="IDX5165"></A>
<CODE>~/.profile</CODE>: 


<PRE>
        if [ -f &#60;LIBROOT&#62;/ciao/DOTprofile ]; then
           . &#60;LIBROOT&#62;/ciao/DOTprofile
        fi
</PRE>

This will set up things so that the Ciao executables are found and you can access the Ciao system manuals using the 
<A NAME="IDX5166"></A>
<CODE>info</CODE> command. 

<LI>Also, if you use

<A NAME="IDX5167"></A>
<CODE>emacs</CODE> (highly recommended) add this line to your 
<A NAME="IDX5168"></A>
<CODE>~/.emacs</CODE> file: 


<PRE>
        (load-file "&#60;LIBROOT&#62;/ciao/DOTemacs")
</PRE>

</UL>

If you are the system administrator, the previous steps can be done once and for all, and globally for all users by including the lines above in the central startup scripts (e.g., in Linux 
<A NAME="IDX5169"></A>
<CODE>/etc/cshrc</CODE>/
<A NAME="IDX5170"></A>
<CODE>/etc/csh.cshrc</CODE>, 
<A NAME="IDX5171"></A>
<CODE>/etc/bashrc</CODE>, 
<A NAME="IDX5172"></A>
<CODE>/usr/share/emacs/.../lisp/site-init.pl</CODE>, etc.). 

<LI><STRONG>Download and install Emacs (optional):</STRONG> If the

<A NAME="IDX5173"></A>
<CODE>emacs</CODE> editor is not available in your system, its installation is highly recommended (if you are installing in a multi-user machine, you may want to do it in a general area so that it is available for other users, even if you do not use it yourself). 

 
<A NAME="IDX5174"></A>
<A NAME="IDX5175"></A>
<A NAME="IDX5176"></A>
<A NAME="IDX5177"></A>

The emacs editor (in all its versions: Un*x, Windows, etc.) can be donloaded from, for example, <A HREF="http://www.emacs.org/">http://www.emacs.org/</A>, and also from the many GNU mirror sites worldwide (See <A HREF="http://www.gnu.org/">http://www.gnu.org/</A> for a list), in the <CODE>gnu/emacs</CODE> and <CODE>gnu/windows/emacs</CODE> directories. For example, at UPM it can be found at <A HREF="ftp://ftp.fi.upm.es/pub/mirrors/gnu/emacs">ftp://ftp.fi.upm.es/pub/mirrors/gnu/emacs</A> and <A HREF="ftp://ftp.fi.upm.es/pub/mirrors/gnu/windows/emacs">ftp://ftp.fi.upm.es/pub/mirrors/gnu/windows/emacs</A>. You can find answers to frequently asked question about 
<A NAME="IDX5178"></A>
<CODE>emacs</CODE> in general at <A HREF="http://www.gnu.org/software/emacs/emacs-faq.text">http://www.gnu.org/software/emacs/emacs-faq.text</A> and about the Windows version at <A HREF="http://www.gnu.org/software/emacs/windows/ntemacs.html">http://www.gnu.org/software/emacs/windows/ntemacs.html</A>. 

<LI><STRONG>Check installation:</STRONG> You may want to read now section <A HREF="ciao_140.html#SEC495">Checking for correct installation</A> and the documentation, which is stored in <CODE>DOCROOT</CODE> (copied from <CODE>SRC/doc/reference</CODE>) and can be easily accessed as explained that same section.

</OL>

<P>
Other useful <CODE>make</CODE> targets are listed at the beginning of <CODE>$(SRC)/Makefile</CODE>. 


<P>
If you have any problems you may want to check section <A HREF="ciao_140.html#SEC504">Troubleshooting (nasty messages and nifty workarounds)</A>. 


<P>
The system can be <STRONG>uninstalled</STRONG> by typing <CODE>gmake uninstall</CODE> in the top directory (the variables in 
<A NAME="IDX5179"></A>
<CODE>SETTINGS</CODE> should have the same value as when the install was performed, so that the same directories are cleaned). 
<A NAME="IDX5180"></A>
<A NAME="IDX5181"></A>
 




<H2><A NAME="SEC485" HREF="ciao_toc.html#TOC485">Installation and compilation under Windows</A></H2>

<P>
There are two possibilities in order to install Ciao Prolog on Windows NT/95/98 machines: 



<UL>

<LI>Installing from the Windows <EM>precompiled</EM> distribution. This is the easiest since it requires no compilation and is highly recommended.

<LI>Installing the standard Ciao Prolog (Un*x) system source distribution and compiling it under Windows. This is somewhat more complex and currently requires the (freely available) Cygnus Win32 development libraries.

</UL>

<P>
The two procedures are described in the following sections. 


<P>
<A NAME="IDX5182"></A>
<A NAME="IDX5183"></A>


<P>
 




<H2><A NAME="SEC486" HREF="ciao_toc.html#TOC486">Windows installation from the precompiled distribution</A></H2>

<P>
This describes the installation of Ciao after downloading the Windows <EM>precompiled</EM> distribution. This is the simplest Windows installation, since it requires no compilation and is highly recommended. 



<UL>
<LI><A HREF="ciao_140.html#SEC487">Installation of the precompiled distribution</A>
<LI><A HREF="ciao_140.html#SEC488">Getting started after Windows installation</A>
<LI><A HREF="ciao_140.html#SEC489">Starting executables from the Windows command line</A>
<LI><A HREF="ciao_140.html#SEC490">Using the emacs environment under Windows</A>
<LI><A HREF="ciao_140.html#SEC491">Compiling the miscellaneous utilities under Windows</A>
<LI><A HREF="ciao_140.html#SEC492">Server installation under Windows</A>
<LI><A HREF="ciao_140.html#SEC493">Uninstallation under Windows</A>
</UL>



<H3><A NAME="SEC487" HREF="ciao_toc.html#TOC487">Installation of the precompiled distribution</A></H3>

<P>
Please follow these steps (below we use the terms <EM>folder</EM> and <EM>directory</EM> interchangeably): 



<OL>

<LI>Download the precompiled distribution and unpack it into any suitable folder, such as, e.g., <CODE>C:\Program Files</CODE> (this will create there a folder whose name reflects the Ciao version). Due to limitations of Windows related to file associations, do not put Ciao too deep in the folder hierarchy. For unpacking you will need a recent version of a zip archive manager -- there are many freely available such as

<A NAME="IDX5184"></A>
<CODE>WinZip</CODE>, 
<A NAME="IDX5185"></A>
<CODE>unzip</CODE>, 
<A NAME="IDX5186"></A>
<CODE>pkunzip</CODE>, etc.). If you have a previous version of Ciao installed, make sure you do not have any Ciao applications (including, e.g., a toplevel shell) running, or the extraction process may not be able to complete. You may want to delete the entire folder of the previous installation to save space. 

<LI>Run (e.g. by double-clicking on it) the <CODE>install</CODE>(<CODE>.bat</CODE>) script. This will update the windows registry (the file <CODE>ciao.reg</CODE> lists the additions) and also create some <CODE>.bat</CODE> files for running Ciao executables from the command line. It also creates initialization scripts for the

<A NAME="IDX5187"></A>
<CODE>emacs</CODE> editor. After that, you may need to reboot for the changes in the registry to take effect. 

<LI>You may want to add a

<A NAME="IDX5188"></A>
<A NAME="IDX5189"></A>
<EM>windows shortcut</EM> 
<A NAME="IDX5190"></A>
<A NAME="IDX5191"></A>
in a convenient place, such as the desktop, to 
<A NAME="IDX5192"></A>
<CODE>ciaosh.cpx</CODE>, the standard interactive toplevel shell. It is located inside the <CODE>shell</CODE> folder (e.g., click on the file 
<A NAME="IDX5193"></A>
<CODE>ciaosh.cpx</CODE> with the right mouse button and select the appropriate option, <CODE>Send to-&#62;Desktop as shortcut</CODE>). 

<LI>You may also want to add another shortcut to the file

<A NAME="IDX5194"></A>
<CODE>ciao.html</CODE> located inside <CODE>doc\reference\ciao_html</CODE> so that you can open the Ciao manual by simply double-clicking on this shortcut. 

</OL>



<H3><A NAME="SEC488" HREF="ciao_toc.html#TOC488">Getting started after Windows installation</A></H3>

<P>
The actions and registry changes performed by the installation procedure, in addition to setting icons for ciao-related file types, make several other things possible: 



<UL>

<LI>Double-clicking on the shortcut made above to <CODE>ciao.html</CODE> should show the Ciao manual in your default WWW browser. Make sure you configure your browser to use

<A NAME="IDX5195"></A>
<A NAME="IDX5196"></A>
<EM>style sheets</EM> for correct formatting of the manual (note, however, some older versions of 
<A NAME="IDX5197"></A>
Explorer did not support style sheets well and will give better results turning them off). The <CODE>doc\reference</CODE> folder contains the manual also in the other formats present in the distribution, such as <CODE>info</CODE> (very convenient for users of the 
<A NAME="IDX5198"></A>
<CODE>emacs</CODE> editor/program development system) and <CODE>postscript</CODE> or <CODE>pdf</CODE>, which are specially useful for printing, using an application such as 
<A NAME="IDX5199"></A>
<CODE>ghostview</CODE> (freely available from <A HREF="http://www.cs.wisc.edu/~ghost/index.html">http://www.cs.wisc.edu/~ghost/index.html</A>) or 
<A NAME="IDX5200"></A>
<CODE>acrobat reader</CODE> (<A HREF="http://www.adobe.com">http://www.adobe.com</A>) respectively. 
<A NAME="IDX5201"></A>
<A NAME="IDX5202"></A>
<A NAME="IDX5203"></A>
<A NAME="IDX5204"></A>

<LI>It is possible to run any Ciao executable (ending in <CODE>.cpx</CODE>) by double-clicking on it. For example, you can try starting this way

<A NAME="IDX5205"></A>
<CODE>ciaosh.cpx</CODE>, from inside the shell folder or from the shortcut created above. 

<LI>Once the shell is started, you can load and execute Prolog modules inside the interactive toplevel shell in the standard way (e.g., type <CODE>use_module(<EM>file</EM>).</CODE>, <CODE>use_module(library(<EM>file</EM>)).</CODE> for library modules, <CODE>ensure_loaded(<EM>file</EM>).</CODE> for files which are not modules, and <CODE>use_package(<EM>file</EM>).</CODE> for library packages).

For example, you may want to type <CODE>use_package(iso)</CODE> to ensure Ciao has loaded all the iso builtins (whether this is done by default or not depends on your 
<A NAME="IDX5206"></A>
<CODE>.ciaorc</CODE> file). Do not worry about any 'module already in executable' messages --these are normal and simply mean that a certain module is already pre-loaded in the toplevel shell. At this point, typing <CODE>write(hello).</CODE> should work. 

<LI>To change the working directory to, say, the <CODE>tests</CODE> directory, first do:


<PRE>
    ?- use_module(library(system)).
</PRE>

(loading the 
<A NAME="IDX5207"></A>
<CODE>system</CODE> library makes a number of system-related predicates such as 
<A NAME="IDX5208"></A>
<CODE>cd/1</CODE> accessible) and then: 


<PRE>
    ?- cd('$/tests').  
</PRE>

(in Ciao the sequence <CODE>$/</CODE> <EM>at the beginning of a path name</EM> is replaced by the path of the Ciao root directory). 

<LI>

<A NAME="IDX5209"></A>
Executables can be generated from the toplevel shell (using 
<A NAME="IDX5210"></A>
<CODE>make_exec/2</CODE>) or using the standalone compiler (
<A NAME="IDX5211"></A>
<CODE>ciaoc.cpx</CODE>, located in the <CODE>ciaoc</CODE> folder). To be able to make an executable, the file should define the predicate 
<A NAME="IDX5212"></A>
<CODE>main/1</CODE> (or 
<A NAME="IDX5213"></A>
<CODE>main/0</CODE>), which will be called upon startup (see the corresponding manual section for details). 

For example, within the 
<A NAME="IDX5214"></A>
<CODE>tests</CODE> directory, you can type: 


<PRE>
    ?- make_exec(hw,_).
</PRE>

which should produce an executable. Double-clicking on this executable should execute it. 

<LI>The Ciao toplevel can be made to execute upon startup a number of commands (such as, e.g., loading certain files or setting certain Prolog flags) contained in an initialization file. This file should be called

<A NAME="IDX5215"></A>
<CODE>.ciaorc</CODE> and placed in your <EM>home</EM> folder (e.g., the same in which you put your 
<A NAME="IDX5216"></A>
<CODE>.emacs</CODE> file). You need to set the environment variable <CODE>HOME</CODE> to the path of this folder for the Ciao toplevel shell to be able to locate this file on startup. 

<LI>To exit the top level shell, type <CODE>halt.</CODE> as usual, or <KBD>^Z</KBD>.

<LI>Another way of creating Ciao executables from source files is by right-clicking on <CODE>.pl</CODE> files and choosing "make executable". This also uses the standalone compiler.

<LI>Double-clicking on files ending in <CODE>.pls</CODE>, "ciao prolog scripts", will also execute them. These are files containing Prolog source but which get executed without having to explicitly compile them (in the same way as, e.g., <CODE>.bat</CODE> files). As an example, you can double click on the file

<A NAME="IDX5217"></A>
<CODE>hw.pls</CODE> in the 
<A NAME="IDX5218"></A>
<CODE>tests</CODE> folder and look at the source with an editor. You can try changing the <CODE>Hello world</CODE> message and double-clicking again. 

As you can see, the file should define the predicate 
<A NAME="IDX5219"></A>
<CODE>main/1</CODE>, which will be called upon startup. The two header lines are only necessary in Un*x. You can leave them in in Windows (so that the script will work also in Un*x without any change) or you can take them out. These two lines can be added automatically in 
<A NAME="IDX5220"></A>
<CODE>emacs</CODE> from the Ciao/Prolog menu or by typing <KBD>^C</KBD> <KBD>I</KBD> <KBD>S</KBD>. 

</UL>



<H3><A NAME="SEC489" HREF="ciao_toc.html#TOC489">Starting executables from the Windows command line</A></H3>

<P>
The installation script also creates a <CODE>.bat</CODE> skeleton file (<CODE>bat_skel</CODE> in folder Win32) which allows running Ciao executables from the command line. If you want to run a Ciao executable <CODE>file.cpx</CODE> from the command line, you normally copy the skeleton file to the folder were the executable is and rename it to file.bat, then change its contents as explained in a comment inside. Note that this <CODE>.bat</CODE> file is usually not necessary in NT, as its command shell understands file extension associations, i.e., in windows NT it is possible to run the <CODE>file.cpx</CODE> executable directly. Due to limitations of <CODE>.bat</CODE> files in Windows 95/98, in those OSs no more than 9 command line arguments can be passed to the executable (in NT there is no such restriction). 


<P>
The installation script creates also <CODE>ciaosh.bat</CODE> and <CODE>ciaoc.bat</CODE> files (in the 
<A NAME="IDX5221"></A>
<CODE>shell</CODE> and 
<A NAME="IDX5222"></A>
<CODE>ciaoc</CODE> folders respectively). These allow calling the interactive top-level and the standalone compiler from the command line in Windows95/98. 




<H3><A NAME="SEC490" HREF="ciao_toc.html#TOC490">Using the emacs environment under Windows</A></H3>

<P>
<A NAME="IDX5223"></A>
<A NAME="IDX5224"></A>
While it is easy to use Ciao with any editor of your choice, using it within the 
<A NAME="IDX5225"></A>
<CODE>emacs</CODE> editor/program development system is highly recommended: Ciao includes an 
<A NAME="IDX5226"></A>
<CODE>emacs</CODE> <EM>mode</EM> which greatly simplifies many program development tasks (see section <A HREF="ciao_11.html#SEC49">Using Ciao inside GNU emacs</A> for details on the capabilities of 
<A NAME="IDX5227"></A>
<CODE>ciao</CODE>/
<A NAME="IDX5228"></A>
<CODE>emacs</CODE> combination. 


<P>
 
<A NAME="IDX5229"></A>
<A NAME="IDX5230"></A>
<A NAME="IDX5231"></A>
<A NAME="IDX5232"></A>


<P>
The emacs editor (in all its versions: Un*x, Windows, etc.) can be donloaded from, for example, <A HREF="http://www.emacs.org/">http://www.emacs.org/</A>, and also from the many GNU mirror sites worldwide (See <A HREF="http://www.gnu.org/">http://www.gnu.org/</A> for a list), in the <CODE>gnu/emacs</CODE> and <CODE>gnu/windows/emacs</CODE> directories. For example, at UPM it can be found at <A HREF="ftp://ftp.fi.upm.es/pub/mirrors/gnu/emacs">ftp://ftp.fi.upm.es/pub/mirrors/gnu/emacs</A> and <A HREF="ftp://ftp.fi.upm.es/pub/mirrors/gnu/windows/emacs">ftp://ftp.fi.upm.es/pub/mirrors/gnu/windows/emacs</A>. You can find answers to frequently asked question about 
<A NAME="IDX5233"></A>
<CODE>emacs</CODE> in general at <A HREF="http://www.gnu.org/software/emacs/emacs-faq.text">http://www.gnu.org/software/emacs/emacs-faq.text</A> and about the Windows version at <A HREF="http://www.gnu.org/software/emacs/windows/ntemacs.html">http://www.gnu.org/software/emacs/windows/ntemacs.html</A>. 


<P>
In order to allow 
<A NAME="IDX5234"></A>
<CODE>emacs</CODE> to load the Ciao mode automatically when editing and to access the documentation, open using 
<A NAME="IDX5235"></A>
<CODE>emacs</CODE> (<KBD>^X</KBD><KBD>^F</KBD>)) the file 
<A NAME="IDX5236"></A>
<CODE>~/.emacs</CODE> (or, perhaps, 
<A NAME="IDX5237"></A>
<CODE>c:/.emacs</CODE>) and add the following line to it: 



<PRE>
        (load-file "&#60;CIAODIR&#62;/DOTemacs.el")
</PRE>

<P>
where you should put in place of <CODE>&#60;CIAODIR&#62;</CODE> the directory where you installed the Ciao distribution. After doing this (and exiting and restarting 
<A NAME="IDX5238"></A>
<CODE>emacs</CODE>) the following things should work: 



<UL>

<LI>When opening a Prolog file (with <CODE>.pl</CODE> or <CODE>.pls</CODE> ending) the code should appear highlighted according to syntax (e.g., comments in red), and a <CODE>Ciao/Prolog</CODE> menu should appear in the menu bar on top of the

<A NAME="IDX5239"></A>
<CODE>emacs</CODE> window. 

<LI>Accessing the Ciao manuals from the <CODE>Ciao/Prolog</CODE> menu (or typing <KBD>^H</KBD> <KBD>i</KBD>) should open a list of manuals in info format in which the Ciao manual(s) should appear.

<LI>Loading the file using the <CODE>Ciao/Prolog</CODE> menu (or typing <KBD>^C</KBD> <KBD>l</KBD>) should start in another emacs buffer the Ciao toplevel shell and load the file. You should now be able to switch the the toplevel shell and make queries from within

<A NAME="IDX5240"></A>
<CODE>emacs</CODE>. 

<LI>You can also, e.g., create executables from the <CODE>Ciao/Prolog</CODE> menu. See section <A HREF="ciao_11.html#SEC49">Using Ciao inside GNU emacs</A> for the many other functionalities of this environment.

</UL>



<H3><A NAME="SEC491" HREF="ciao_toc.html#TOC491">Compiling the miscellaneous utilities under Windows</A></H3>

<P>
The 
<A NAME="IDX5241"></A>
<CODE>etc</CODE> folder contains a number of utilities, documented in the manual in <EM>PART V - Miscellaneous Standalone Utilities</EM>. In the Win32 distribution these utilities are not compiled by the installation process. You can create the executable for each of them when needed by compiling the corresponding <CODE>.pl</CODE> file. 




<H3><A NAME="SEC492" HREF="ciao_toc.html#TOC492">Server installation under Windows</A></H3>

<P>
<A NAME="IDX5242"></A>
<A NAME="IDX5243"></A>
<A NAME="IDX5244"></A>
<A NAME="IDX5245"></A>


<P>
If you would like to install Ciao on a server machine, used by several clients, the following steps are recommended: 



<UL>

<LI>Follow the standard installation procedure on the server. All the functionality specified in the previous sections should then be available on the server.

<LI>Perform a

<A NAME="IDX5246"></A>
<A NAME="IDX5247"></A>
<EM>client installation</EM> on each client, by running (e.g., double-click on it) the 
<A NAME="IDX5248"></A>
<CODE>client.bat</CODE> script. This should update the registry of each client. 

</UL>



<H3><A NAME="SEC493" HREF="ciao_toc.html#TOC493">Uninstallation under Windows</A></H3>

<P>
To uninstall Ciao under Windows, simply delete the directory in which you put the Ciao distribution. If you also want to delete the registry entries created by the Ciao installation (not strictly needed) this must currently be done by hand. The installation leaves a list of these entries in the file 
<A NAME="IDX5249"></A>
<CODE>ciao.reg</CODE> to aid in this task. Also, all the register entries contain the word <EM>ciao</EM>. Thus, to delete all Ciao entries, run the application 
<A NAME="IDX5250"></A>
<CODE>regedit</CODE> (for example, by selecting <CODE>Run</CODE> from the Windows <CODE>Start</CODE> menu), search (<KBD>^F</KBD>) for <EM>ciao</EM> in all registry entries (i.e., select all of <CODE>Keys</CODE>, <CODE>Values</CODE>, and <CODE>Data</CODE> in the <CODE>Edit-&#62;Find</CODE> dialog), and delete each matching key (click on the left window to find the matching key for each entry found). 




<H2><A NAME="SEC494" HREF="ciao_toc.html#TOC494">Windows installation from the standard source distribution</A></H2>
<P>
<A NAME="IDX5251"></A>
<A NAME="IDX5252"></A>


<P>
<A NAME="IDX5253"></A>
<A NAME="IDX5254"></A>
In order to compile Ciao Prolog for Win32 environments you need to have the (public domain) 
<A NAME="IDX5255"></A>
<A NAME="IDX5256"></A>
<EM>Cygnus Win32</EM> and development libraries installed in your system. Compilation should be performed preferably under Windows NT. 



<UL>

<LI>Thus, the first step, if Cygnus Win32 is not installed in your system, is to download it (from, e.g., <A HREF="http://www.cygnus.com/misc/gnu-win32">http://www.cygnus.com/misc/gnu-win32</A>) and install it. The compilation process also requires that the executables <CODE>rm.exe</CODE>, <CODE>sh.exe</CODE>, and <CODE>uname.exe</CODE> from the Cygnus distribution be copied under <CODE>/bin</CODE> prior to starting the process (if these executables are not available under <CODE>/bin</CODE> the compilation process will produce a number of errors and eventually stop prematurely).

<LI>Assuming all of the above is installed, type <CODE>make allwin32</CODE>. This will compile both the engine and the Prolog libraries. In this process, system libraries that are normally linked dynamically under Un*x (i.e., those for which <CODE>.so</CODE> dynamically loadable files are generated) are linked statically into the engine (this is done instead of generating <CODE>.dll</CODE>s because of a limitation in the current version of the Cygnus Win32 environment). No actual installation is made at this point, i.e., this process leaves things in a similar state as if you had just downloaded and uncompressed the precompiled distribution. Thus, in order to complete the installation you should now:

<LI>Follow the procedure outlined in the first item of section <A HREF="ciao_140.html#SEC486">Windows installation from the precompiled distribution</A> above.

</UL>

<P>
A further note regarding the executables generated by the Ciao compiler and top-level: the same considerations given in section <A HREF="ciao_140.html#SEC486">Windows installation from the precompiled distribution</A> apply regarding <CODE>.bat</CODE> files, etc. However, in a system in which Cygnus Win32 is installed these executables can also be used in a very simple way. In fact, the executables can be run as in Un*x by simply typing their name at the 
<A NAME="IDX5257"></A>
<CODE>bash</CODE> shell command line without any associated <CODE>.bat</CODE> files. This only requires that the 
<A NAME="IDX5258"></A>
<CODE>bash</CODE> shell which comes with Cygnus Win32 be installed and accessible: simply, make sure that 
<A NAME="IDX5259"></A>
<CODE>/bin/sh.exe</CODE> exists. 




<H2><A NAME="SEC495" HREF="ciao_toc.html#TOC495">Checking for correct installation</A></H2>
<P>
<A NAME="IDX5260"></A>
<A NAME="IDX5261"></A>


<P>
If everything has gone well, several applications and tools should be available to a normal user. The most important ones are the following: 



<UL>

<LI>Typing

<A NAME="IDX5262"></A>
<CODE>ciao</CODE> (or 
<A NAME="IDX5263"></A>
<CODE>ciaosh</CODE>) in Un*x or double-clicking on the <CODE>ciaosh.cpx</CODE> icon or its direct access in Windows) should start the typical Prolog top level (the sources are located in <CODE>$(SRC)/shell</CODE>). Typing, e.g., <CODE>use_module(library(dec10_io)).</CODE> at the top level prompt should show a message correctly loading this library from the library directories. Note that some predicates that are built-ins in other Prolog are available through libraries in Ciao. This facilitates making small executables. 

<LI>Typing

<A NAME="IDX5264"></A>
<CODE>ciaoc</CODE> in Un*x (or double-clicking on the 
<A NAME="IDX5265"></A>
<CODE>ciaoc.cpx</CODE> icon in Windows) should produce the help message from the Ciao 
<A NAME="IDX5266"></A>
standalone compiler (note that programs can also be compiled from the shell). In its simplest use, given a top-level <EM>foo</EM><CODE>.pl</CODE> file for an application (the file must define the a predicate 
<A NAME="IDX5267"></A>
<CODE>main/0</CODE> or 
<A NAME="IDX5268"></A>
<CODE>main/1</CODE>) it compiles an executable <CODE>foo</CODE>, automatically detecting which other files need recompilation. 

<LI>Typing

<A NAME="IDX5269"></A>
<CODE>ciao-shell</CODE> should produce a message saying that no code was found. This is a Ciao application which can be used to write 
<A NAME="IDX5270"></A>
scripts written in Prolog, i.e., files which do not need any explicit compilation to be run. In Windows these scripts execute by simply double-clicking on them. 

</UL>

<P>
Also, the following documentation-related actions should work: 



<UL>

<LI>If the

<A NAME="IDX5271"></A>
<CODE>info</CODE> program is installed, starting <CODE>info</CODE> should produce a list of manuals which should include Ciao manual(s) in a separate section (you may need to log out and back in so that your shell variables are reinitialized). 

<LI>If

<A NAME="IDX5272"></A>
<CODE>emacs</CODE> is installed, typing <CODE>M-x info</CODE> should have the same result as above (you may also need to log out and back in for this). 

<LI>Opening with a

<A NAME="IDX5273"></A>
WWW browser (e.g., 
<A NAME="IDX5274"></A>
<CODE>netscape</CODE>) the directory name or <CODE>URL</CODE> corresponding to <CODE>DOCROOT</CODE> should show a series of Ciao-related manuals. 

<LI>In Un*x, typing <CODE>man ciao</CODE> should produce a man page with general information on Ciao.

</UL>



<H2><A NAME="SEC496" HREF="ciao_toc.html#TOC496">Cleaning up the source directory</A></H2>

<P>
After installation, the source directory can be cleaned up in several ways: 



<UL>

<LI><CODE>gmake uninstall</CODE> removes the installation but does not touch the source directories.

<LI><CODE>gmake totalclean</CODE> leaves the distribution is its original form, throwing away any intermediate files (as well as any unneeded files left behind by the Ciao developers), while still allowing recompilation.

</UL>

<P>
Other useful <CODE>make</CODE> targets are listed at the beginning of <CODE>$(SRC)/Makefile</CODE>. 




<H2><A NAME="SEC497" HREF="ciao_toc.html#TOC497">Environment variables used by Ciao executables</A></H2>

<P>
The executables generated by the Ciao compiler (including the ciao development tools themselves) locate automatically where the Ciao engine and libraries have been installed, since those paths are stored as defaults in the engine and compiler at installation time. Thus, there is no need for setting any environment variables in order to <EM>run</EM> Ciao executables (on a single architecture -- see section <A HREF="ciao_140.html#SEC498">Multiarchitecture support</A> for running on multiple architectures). 


<P>
However, the default paths can be overridden by using the environment variables <CODE>CIAOENGINE</CODE> and <CODE>CIAOLIB</CODE>. The first one will tell the Ciao executables where to look for an engine, and the second will tell them where to look for the libraries. Thus, it is possible to actually use the Ciao system without installing it by setting these variables to the following values: 

<UL>

<LI><CODE>CIAOENGINE</CODE>: <CODE>$(SRC)/bin/$(CIAOARCH)/ciaoengine</CODE>

<LI><CODE>CIAOLIB</CODE>: <CODE>$(SRC)</CODE>

</UL>

<P>
where <CODE>$(CIAOARCH)</CODE> is the string echoed by the command <CODE>SRC/etc/ciao_get_arch</CODE> (or <CODE>BINROOT/ciao_get_arch</CODE>, after installation). 


<P>
This allows 
<A NAME="IDX5275"></A>
using alternate engines or libraries, which can be very useful for system development and experimentation. 




<H2><A NAME="SEC498" HREF="ciao_toc.html#TOC498">Multiarchitecture support</A></H2>

<P>
<A NAME="IDX5276"></A>
<A NAME="IDX5277"></A>


<P>
As mentioned before, Ciao applications (including the compiler and the top level) can run on several machines with different architectures without any need for recompiling, provided there is one Ciao engine (compiled for the corresponding architecture) accessible in each machine. Also, the Ciao libraries (installed in <CODE>LIBROOT</CODE>, which contain also the engines) and the actual binaries (installed in <CODE>BINROOT</CODE>) can themselves be shared on several machines with different architectures, saving disk space. 


<P>
For example, assume that the compiler is installed as: 


<P>
<CODE>/usr/local/share/bin/ciaoc</CODE> 


<P>
and the libraries are installed under 


<P>
<CODE>/usr/local/share/lib</CODE> 


<P>
Assume also that the <CODE>/usr/local/share</CODE> directory is mounted on, say, a number of 
<A NAME="IDX5278"></A>
Linux and a number of 
<A NAME="IDX5279"></A>
Solaris boxes. In order for <CODE>ciaoc</CODE> to run correctly on both machines, the following is needed: 



<OL>

<LI>Make sure you that have done <CODE>gmake install</CODE> on one machine of each architecture (once for Linux and once for Solaris in our example). This recompiles and installs a new engine and any architecture-dependent parts of the libraries for each architecture. The engines will have names such as <CODE>ciaoengine.LINUXi86</CODE>, <CODE>ciaoengine.SolarisSparc</CODE>, and so on.

<LI>In multi-architecture environments it is even more important to make sure that users make the modifications to their startup scripts using

<A NAME="IDX5280"></A>
<CODE>&#60;LIBROOT&#62;/ciao/DOTcshrc</CODE> etc. The selection of the engine (and architecture-dependent parts of libraries) is done in these scripts by setting the environment variable <CODE>CIAOARCH</CODE>, using the <CODE>ciao_get_arch</CODE> command, which is installed automatically when installing Ciao. This will set <CODE>CIAOARCH</CODE> to, say, <CODE>LINUXi86</CODE>, <CODE>SolarisSparc</CODE>, respectively, and <CODE>CIAOENGINE</CODE> will be set to <CODE>ciaoengine.</CODE><EM>CIAOARCH</EM>. 

However, note that this is not strictly necessary if running on only one architecture: if <CODE>CIAOARCH</CODE> is not set (i.e., undefined), the Ciao executables will look simply for <CODE>ciaoengine</CODE>, which is always a link to the latest engine installed in the libraries. But including the initialization files provided has the advantage of setting also paths for the manuals, etc. 

</OL>



<H2><A NAME="SEC499" HREF="ciao_toc.html#TOC499">Architecture specific notes and limitations</A></H2>

<P>
Ciao makes use of advanced characteristics of modern architectures and operating systems such as multithreading, shared memory, sockets, locks, dynamic load libraries, etc., some of which which are sometimes not present in a given system and others may be implemented in very different ways across the different systems. As a result, currently not all Ciao features are available in all supported operating systems. Sometimes this is because not all the required features are present in all the OS flavors supported and sometimes because we simply have not had the time to port them yet. 


<P>
The current state of matters is as follows: 


<DL COMPACT>

<DT>LINUX:
<DD>
multithreading, shared DB access, and locking working. 
<DT>Solaris:
<DD>
multithreading, shared DB access, and locking working. 
<DT>SunOS 4:
<DD>
multithreading, shared DB access, and locking NOT working. 
<DT>Win 95/NT:
<DD>
multithreading, shared DB access, locking, and dynamic linking of object code (C) libraries NOT working. 
</DL>

<P>
The features that do not work are disabled at compile time. If problems appear, please disable them explicitly in the 
<A NAME="IDX5281"></A>
<CODE>SETTINGS</CODE> file. We will make this more automatic sometime in the future. 




<H2><A NAME="SEC500" HREF="ciao_toc.html#TOC500">Downloading new versions</A></H2>

<P>
Ciao and its related libraries and utilities are under constant improvement, so you should make sure that you have the latest versions of the different components, which can be dowloaded from: 
<A NAME="IDX5282"></A>
<A NAME="IDX5283"></A>


<P>
<A HREF="http://clip.dia.fi.upm.es/Software">http://clip.dia.fi.upm.es/Software</A> 




<H2><A NAME="SEC501" HREF="ciao_toc.html#TOC501">Keeping up to date: the Ciao users mailing list</A></H2>

<P>
We recommend that you join the 
<A NAME="IDX5284"></A>
<A NAME="IDX5285"></A>
<A NAME="IDX5286"></A>
<A NAME="IDX5287"></A>
Ciao 
<A NAME="IDX5288"></A>
<A NAME="IDX5289"></A>
<EM>users mailing list</EM> (<CODE>ciao-users@clip.dia.fi.upm.es</CODE>), in order to receive information on new versions and solutions to problems. Simply send a message to <A HREF="mailto:ciao-users-request@clip.dia.fi.upm.es">ciao-users-request@clip.dia.fi.upm.es</A>, containing in the body only the word: 


<P>
<CODE>subscribe</CODE> 


<P>
alone in one line. Messages in the list are strictly limited to issues directly related to Ciao Prolog and your email address will of course be kept strictly confidential. You mail also want to subscribe to the <CODE>comp.lang.prolog</CODE> newsgroup. 


<P>
There is additional info available on the Ciao system, other CLIP group software, publications on the technology underlying these systems, etc. in the CLIP group's WWW site <A HREF="http://clip.dia.fi.upm.es">http://clip.dia.fi.upm.es</A>. 




<H2><A NAME="SEC502" HREF="ciao_toc.html#TOC502">Reporting bugs</A></H2>
<P>
<A NAME="IDX5290"></A>
<A NAME="IDX5291"></A>
<A NAME="IDX5292"></A>
<A NAME="IDX5293"></A>


<P>
If you still have problems after downloading the latest version and reading the installation instructions you can send a message to <A HREF="mailto:ciao-bug@clip.dia.fi.upm.es">ciao-bug@clip.dia.fi.upm.es</A>. Please be as informative as possible in your messages, so that we can reproduce the bug. 



<UL>

<LI>For <EM>installation problems</EM> we typically need to have the version and patch number of the Ciao package (e.g., the name of the file downloaded), the output produced by the installation process (you can capture it by redirecting the output into a file or cutting and pasting with the mouse), and the exact version of the Operating System you are using (as well as the C compiler, if you took a source distribution).

<LI>For <EM>problems during use</EM> we also need the Ciao and OS versions and a small example of code which we can run to reproduce the bug.

</UL>

<P>
 




<H2><A NAME="SEC503" HREF="ciao_toc.html#TOC503">Porting to currently unsupported operating systems</A></H2>

<P>
If you would like to port Ciao to a currently unsupported platform, there are several issues to take into account. The main one is to get the <EM>engine</EM> to compile in that platform, i.e., the C code under the <CODE>engine</CODE> directory. To this end, look under the directory <CODE>$(SRC)/makefile-sysdep</CODE>: there is a 
<A NAME="IDX5294"></A>
<CODE>mkf-CIAOARCH</CODE> file for every architecture/OS under which Ciao is known to compile. You can start from the closest one and customize it for your local distribution or installed tools. But please keep the original files! Once a working engine is achieved, it should be possible to continue with the standard installation procedure, which will try to use a completely static version of the standalone compiler (<CODE>ciaoc.sta</CODE> in the <CODE>ciaoc</CODE> directory) to compile the interactive top-level (
<A NAME="IDX5295"></A>
<CODE>ciaosh</CODE>) and a new version of the standalone compiler (
<A NAME="IDX5296"></A>
<CODE>ciaoc</CODE>). These in turn should be able to compile the Prolog libraries. You may also need to look at some libraries (such as, for example, 
<A NAME="IDX5297"></A>
<CODE>sockets</CODE>) which contain C code. Porting to other Un*x flavours should be easy while other operating system families may require more work. If you do succeed in porting to a platform that is currently please send the 
<A NAME="IDX5298"></A>
<CODE>mkf-CIAOARCH</CODE> and any patches to <A HREF="mailto:ciao@clip.dia.fi.upm.es">ciao@clip.dia.fi.upm.es</A>, and we will include it (with due credit, of course) in the next distribution. 
 




<H2><A NAME="SEC504" HREF="ciao_toc.html#TOC504">Troubleshooting (nasty messages and nifty workarounds)</A></H2>
<P>
<A NAME="IDX5299"></A>
<A NAME="IDX5300"></A>


<P>
The following a list of common installation problems reported by users: 



<UL>

<LI><STRONG>Problem:</STRONG>

During engine compilation, the following message appears: <CODE>tasks.c:102:PTHREAD_CANCEL_ASYNCHRONOUS undeclared (first use of this function)</CODE>. 

<STRONG>Possible reason and solution:</STRONG> 

Your (Linux?) system does not have (yet) the 
<A NAME="IDX5301"></A>
Posix threads library installed. You can upgrade to one which does have it, or download the library from 

<A HREF="http://pauillac.inria.fr/~xleroy/linuxthreads/index.html">http://pauillac.inria.fr/~xleroy/linuxthreads/index.html</A> 

and install it, or disable the use of threads in Linux: for this, edit the 
<A NAME="IDX5302"></A>
<CODE>SETTINGS</CODE> file and specify <CODE>USE_THREADS=no</CODE>, which will avoid linking against thread libraries (it will disable the use of thread-related primitives as well). Clean the engine with <CODE>make engclean</CODE> and restart compilation. 

If you have any alternative threads library available, you can tinker with <CODE>engine/threads.h</CODE> and the files under <CODE>makefile-sysdep</CODE> in order to get the task managing macros right for your system. Be sure to link the right library. If you succeed, we (<A HREF="mailto:ciao@clip.dia.fi.upm.es">ciao@clip.dia.fi.upm.es</A>) will be happy of knowing about what you have done. 
 
<LI><STRONG>Problem:</STRONG>

<CODE>-lpthread: library not found</CODE> (or similar) 

<STRONG>Possible reason and solution:</STRONG> 

Your (Linux?) system seems to have Posix threads installed, but there is no threads library in the system. In newer releases (e.g., 
<A NAME="IDX5303"></A>
RedHat 5.0), the Posix threads system calls have been included in <CODE>glibc.so</CODE>, so specifying <CODE>-lpthread</CODE> in <CODE>makefile-sysdep/mkf-LINUX</CODE> is not needed; remove it. <CODE>make engclean</CODE> and restart installation. 

Alternatively, you may have made a custom installation of Posix threads in a non-standard location: be sure to include the flag <CODE>-L/this/is/where/the/posix/libraries/are</CODE> <STRONG>before</STRONG> <CODE>-lpthread</CODE>, and to update <CODE>/etc/ld.so.conf</CODE> (see <CODE>man ldconfig</CODE>). 
 
<LI><STRONG>Problem:</STRONG>

<CODE>Segmentation Violation</CODE> (when starting the first executable) 

<STRONG>Possible reason and solution:</STRONG> 

This has been observed with certain older versions of 
<A NAME="IDX5304"></A>
<CODE>gcc</CODE> which generated erroneous code under full optimization. The best solution is to upgrade to a newer version of 
<A NAME="IDX5305"></A>
<CODE>gcc</CODE>. Alternatively, lowering the level of optimization (by editing the 
<A NAME="IDX5306"></A>
<CODE>SETTINGS</CODE> file in the main directory of the distribution) normally solves the problem, at the cost of reduced execution speed. 
 
<LI><STRONG>Problem:</STRONG> <CODE>ciaoc: /home/clip/lib/ciao/ciao-X.Y/engine/ciaoengine: not found</CODE>

<STRONG>Possible reason and solution:</STRONG> 


<UL>

<LI>The system was not fully installed and the variable <CODE>CIAOENGINE</CODE> was not set.

<LI>The system was installed, the variable <CODE>CIAOENGINE</CODE> is set, but it is does not point to a valid ciaoengine.

</UL>

See the file <CODE>LIBROOT/ciao/DOTcshrc</CODE> for user settings for environment variables. 

<LI><STRONG>Problem:</STRONG>

<CODE>ERROR: File library(compiler) not found - aborting...</CODE> (or any other library is not found) 

<STRONG>Possible reason and solution:</STRONG> 


<UL>

<LI>The system was not installed and the variable <CODE>CIAOLIB</CODE> was not set.

<LI>The system is installed and the variable <CODE>CIAOLIB</CODE> is wrong.

</UL>

See the file <CODE>LIBROOT/ciao/DOTcshrc</CODE> for user settings for environment variables. 

<LI><STRONG>Problem:</STRONG>

<CODE>ERROR: File &#60;some_directory&#62;/&#60;some_file&#62;.itf not found - aborting...</CODE> 

<STRONG>Possible reason and solution:</STRONG> 

Can appear when compiling <CODE>.pl</CODE> files. The file to compile (&#60;some_file&#62;.pl) is not in the directory &#60;some_directory&#62;. You gave a wrong file name or you are in the wrong directory. 
 
<LI><STRONG>Problem:</STRONG>

<CODE>*ERROR*: /(write_option,1) is not a regular type</CODE> (and similar ones) 

<STRONG>Possible reason and solution:</STRONG> 

This is not a problem, but rather the type checker catching some minor inconsistencies which may appear while compiling the libraries. Bug us to remove it, but ignore it for now. 

<LI><STRONG>Problem:</STRONG>

<CODE>WARNING: Predicate &#60;some_predicate&#62;/&#60;N&#62; undefined in module &#60;some_module&#62;</CODE> 

<STRONG>Possible reason and solution:</STRONG> 

It can appear when the compiler is compiling Ciao library modules. If so, ignore it (we will fix it). If it appears when compiling user programs or modules, you may want to check your program for those undefined predicates. 

<LI><STRONG>Problem:</STRONG>

<CODE>gmake[1]: execve: /home/clip/mcarro/ciao-0.7p2/etc/collect_modules: No such file or directory</CODE> 

<STRONG>Possible reason and solution:</STRONG> 

Check if collect_modules is in $(SRC)/etc and is executable. If it is not here, your distribution is incorrect: please let us know. 

<LI><STRONG>Problem:</STRONG> <CODE>make: Fatal error in reader: COMMON, line 12: Unexpected end of line seen</CODE>

<STRONG>Possible reason and solution:</STRONG> 

You are using standard Un*x make, not GNU's make implementation (gmake). 
 
</UL>

<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_139.html">previous</A>, <A HREF="ciao_141.html">next</A>, <A HREF="ciao_148.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
