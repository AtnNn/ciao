<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 5 May 2000 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Using Ciao inside GNU emacs</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_11.html">previous</A>, <A HREF="ciao_13.html">next</A>, <A HREF="ciao_158.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC91" HREF="ciao_toc.html#TOC91">Using Ciao inside GNU emacs</A></H1>

<P>
<STRONG>Author(s):</STRONG> Manuel Hermenegildo, Manuel C. Rodriguez, Daniel Cabeza, <A HREF="mailto:clip@dia.fi.upm.es">clip@dia.fi.upm.es</A>, <A HREF="http://www.clip.dia.fi.upm.es/">http://www.clip.dia.fi.upm.es/</A>, The CLIP Group, School of Computer Science, Technical University of Madrid.


<P>
<STRONG>Version:</STRONG> 1.5#133 (2000/5/5, 17:32:14 CEST)


<P>
<STRONG>Version of last change:</STRONG> 1.5#118 (2000/4/19, 18:13:43 CEST)


<P>
The Ciao/Prolog 
<A NAME="IDX836"></A>
emacs interface (or <EM>mode</EM> 
<A NAME="IDX837"></A>
<A NAME="IDX838"></A>
in 
<A NAME="IDX839"></A>
<CODE>emacs</CODE> terms) provides a rich, integrated user interface to the Ciao 
<A NAME="IDX840"></A>
<A NAME="IDX841"></A>
<EM>program development environment</EM> components, including the 
<A NAME="IDX842"></A>
<CODE>ciaosh</CODE> interactive top level and the 
<A NAME="IDX843"></A>
<CODE>ciaopp</CODE> preprocessor. While most features of the Ciao development environment are available from the command line of the preprocessor and the top-level shell, using Ciao inside 
<A NAME="IDX844"></A>
<CODE>emacs</CODE> is highly recommended. The facilities that this mode provides include: 



<UL>

<LI>

<A NAME="IDX845"></A>
<A NAME="IDX846"></A>
<EM>Syntax highlighting</EM> and syntax coloring, 
<A NAME="IDX847"></A>
<A NAME="IDX848"></A>
<A NAME="IDX849"></A>
<A NAME="IDX850"></A>
<EM>auto-indentation</EM>, 
<A NAME="IDX851"></A>
<A NAME="IDX852"></A>
<EM>auto-fill</EM>, etc. of code. This includes the assertions used by the preprocessor and the documentation strings used by the Ciao auto-documenter, 
<A NAME="IDX853"></A>
<CODE>lpdoc</CODE>. 

<LI>Providing automatic access to

<A NAME="IDX854"></A>
on-line help for all predicates by accessing the Ciao system manuals in 
<A NAME="IDX855"></A>
<CODE>info</CODE> format. 

<LI>Starting and communicating with

<A NAME="IDX856"></A>
<CODE>ciaopp</CODE>, the 
<A NAME="IDX857"></A>
<A NAME="IDX858"></A>
<EM>Ciao preprocessor</EM>, running in its own 
<A NAME="IDX859"></A>
sub-shell. This allows easily performing certain kinds of 
<A NAME="IDX860"></A>
<A NAME="IDX861"></A>
<EM>static checks</EM> (useful for finding errors in programs before running them), program analysis tasks, and 
<A NAME="IDX862"></A>
<A NAME="IDX863"></A>
<EM>program transformations</EM> on source programs. 

<LI>Starting and communicating with the

<A NAME="IDX864"></A>
<A NAME="IDX865"></A>
<EM>Ciao top-level</EM>, running in its own 
<A NAME="IDX866"></A>
sub-shell. This facilitates loading programs, checking the <EM>syntax</EM> of programs (and of 
<A NAME="IDX867"></A>
<A NAME="IDX868"></A>
<EM>assertions</EM> within programs), marking and unmarking modules for interactive debugging, 
<A NAME="IDX869"></A>
<A NAME="IDX870"></A>
<EM>tracing the source code</EM> 
<A NAME="IDX871"></A>
<A NAME="IDX872"></A>
<A NAME="IDX873"></A>
<A NAME="IDX874"></A>
during debugging, making stand-alone executables, compiling modules to dynamically linkable Prolog objects, compiling modules to active objects, etc. 

<LI>Syntax highlighting and coloring of the error and warning messages produced by the top level, preprocessor, or any other tool using the same message format (such as the

<A NAME="IDX875"></A>
<CODE>lpdoc</CODE> auto-documenter), and <EM>locating automatically the points in the source files where such errors occur</EM>. 

<LI>Performing automatic

<A NAME="IDX876"></A>
<A NAME="IDX877"></A>
<EM>version control</EM> and keeping a 
<A NAME="IDX878"></A>
<A NAME="IDX879"></A>
<EM>changelog</EM> of individual files or whole applications. This is done by automatically including changelog entries in source files, which can then be processed by the 
<A NAME="IDX880"></A>
<CODE>lpdoc</CODE> auto-documenter. 

</UL>

<P>
This chapter explains how to use the Ciao/Prolog 
<A NAME="IDX881"></A>
<CODE>emacs</CODE> interface and how to set up your 
<A NAME="IDX882"></A>
<CODE>emacs</CODE> environment for correct operation. The Ciao 
<A NAME="IDX883"></A>
<CODE>emacs</CODE> interface can also be used to work with other Prolog or CLP systems. 



<UL>
<LI><A HREF="ciao_12.html#SEC92">Conventions for writing Ciao programs under Emacs</A>
<LI><A HREF="ciao_12.html#SEC93">Checking the installation</A>
<LI><A HREF="ciao_12.html#SEC94">Functionality and associated key sequences (bindings)</A>
<LI><A HREF="ciao_12.html#SEC108">Commands available in toplevel and preprocessor buffers</A>
<LI><A HREF="ciao_12.html#SEC109">Using Ciao/Prolog mode capabilities in standard shells</A>
<LI><A HREF="ciao_12.html#SEC110">Coexistence with other Prolog interfaces</A>
<LI><A HREF="ciao_12.html#SEC111">Customization</A>
<LI><A HREF="ciao_12.html#SEC115">Installation of the Ciao/Prolog emacs interface</A>
<LI><A HREF="ciao_12.html#SEC116">Emacs version compatibility</A>
<LI><A HREF="ciao_12.html#SEC117">Acknowledgments (ciao.el)</A>
</UL>



<H2><A NAME="SEC92" HREF="ciao_toc.html#TOC92">Conventions for writing Ciao programs under Emacs</A></H2>
<P>
<A NAME="IDX884"></A>
<A NAME="IDX885"></A>


<P>
This is particularly important for the 
<A NAME="IDX886"></A>
source-level debugger and the 
<A NAME="IDX887"></A>
syntax coloring capabilities. This is due to the fact that it would be unrealistic to write a complete Prolog parser in Emacs lisp. These conventions are the following, in order of importance: 



<UL>

<LI>Clauses should begin on the first column (this is used to recognize the beginning of a clause).

<LI>C style comments should not be used in a clause, but can be used outside any clause.

</UL>

<P>
The following are suggestions which are not strictly necessary but which can improve operation: 



<UL>

<LI>Body literals should be indented, and there should be not more than one literal per line. This allows more precision in the location of program points during source-level debugging, i.e., when marking breakpoints and during line tracing.

</UL>



<H2><A NAME="SEC93" HREF="ciao_toc.html#TOC93">Checking the installation</A></H2>

<P>
It may be possible that a complete pre-installation of the Ciao/Prolog 
<A NAME="IDX888"></A>
<CODE>emacs</CODE> interface was already completed during Ciao installation. To check this, open a file with a <CODE>.pl</CODE> ending. You should see that 
<A NAME="IDX889"></A>
<CODE>emacs</CODE> enters Ciao/Prolog mode: the mode is identified in the 
<A NAME="IDX890"></A>
status bar below the 
<A NAME="IDX891"></A>
buffer and, if the 
<A NAME="IDX892"></A>
emacs menu bar is enabled, you should see the Ciao/Prolog menus. You should be able from the menu-bar, for example, to go to the Ciao manuals in the info or load the <CODE>.pl</CODE> file that you just opened into a ciao top level. 


<P>
If things don't work properly, see the section section <A HREF="ciao_12.html#SEC115">Installation of the Ciao/Prolog emacs interface</A> latter in this chapter. 




<H2><A NAME="SEC94" HREF="ciao_toc.html#TOC94">Functionality and associated key sequences (bindings)</A></H2>

<P>
The following is a summary of the capabilities of the Ciao/Prolog emacs interface and the (default) 
<A NAME="IDX893"></A>
<A NAME="IDX894"></A>
<EM>key sequences</EM> used to access those capabilities. Most of these functions are accessible also from the menu bar. 



<UL>
<LI><A HREF="ciao_12.html#SEC95">Syntax coloring and syntax based editors</A>
<LI><A HREF="ciao_12.html#SEC96">Getting on-line help</A>
<LI><A HREF="ciao_12.html#SEC97">Loading and compiling programs</A>
<LI><A HREF="ciao_12.html#SEC98">Locating errors and checking the syntax of assertions</A>
<LI><A HREF="ciao_12.html#SEC99">Commands which help in typing in programs</A>
<LI><A HREF="ciao_12.html#SEC100">Debugging programs</A>
<LI><A HREF="ciao_12.html#SEC101">Preprocessing programs</A>
<LI><A HREF="ciao_12.html#SEC102">Version control</A>
<LI><A HREF="ciao_12.html#SEC103">Generating program documentation</A>
<LI><A HREF="ciao_12.html#SEC104">Setting the top-level</A>
<LI><A HREF="ciao_12.html#SEC105">Traditional Prolog Mode Commands</A>
<LI><A HREF="ciao_12.html#SEC106">Other commands</A>
<LI><A HREF="ciao_12.html#SEC107">Getting the Ciao/Prolog mode version</A>
</UL>



<H3><A NAME="SEC95" HREF="ciao_toc.html#TOC95">Syntax coloring and syntax based editors</A></H3>

<P>
Syntax-based coloring is provided automatically when opening Ciao/Prolog files. The mode should be set to Ciao/Prolog and the Ciao mode menus should appear on the menu bar. Limited syntax-based indentation is also provided: 
<DL COMPACT>

<DT><KBD>TAB</KBD>
<DD>
Indent current line as Ciao/Prolog code. With argument, indent any additional lines of the same clause rigidly along with this one. 
</DL>



<H3><A NAME="SEC96" HREF="ciao_toc.html#TOC96">Getting on-line help</A></H3>

<P>
The following commands are useful for getting on-line help. This is done by accessing the 
<A NAME="IDX895"></A>
<CODE>info</CODE> version of the Ciao manuals or the 
<A NAME="IDX896"></A>
<CODE>emacs</CODE> built-in help strings. Note also that the 
<A NAME="IDX897"></A>
<CODE>info</CODE> standard <CODE>search</CODE> command (generally bound to <KBD>s</KBD>) can be used inside 
<A NAME="IDX898"></A>
<CODE>info</CODE> buffers to search for a given string. 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>TAB</KBD>
<DD>
Find help for the symbol (e.g., predicate, directive, declaration, type, etc.) that is currently under the cursor. Opens a (hopefully) relevant part of the Ciao manuals in 
<A NAME="IDX899"></A>
<CODE>info</CODE> mode. Requires that the Ciao manuals in 
<A NAME="IDX900"></A>
<CODE>info</CODE> format be installed and accessible to 
<A NAME="IDX901"></A>
<CODE>emacs</CODE> (i.e., they should appear somewhere in the info directory when typing <CODE>M-x info</CODE>). It also requires 
<A NAME="IDX902"></A>
<CODE>word-help.el</CODE>, which is provided with Ciao. Refer to the installation instructions if this is not the case. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>/</KBD>
<DD>
Find a completion for the symbol (e.g., predicate, directive, declaration, type, etc.) that is currently under the cursor. Uses for completion the contents of the indices of the Ciao manuals. Same requirements as for finding help for the symbol. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^M</KBD>
<DD>
Go to the part of the info directory containing the Ciao manuals. 
</DL>

<DL COMPACT>

<DT><KBD>^H</KBD> <KBD>m</KBD>
<DD>
Show a short description of the Ciao/Prolog emacs mode, including all key bindings. 
</DL>



<H3><A NAME="SEC97" HREF="ciao_toc.html#TOC97">Loading and compiling programs</A></H3>

<P>
These commands allow 
<A NAME="IDX903"></A>
<A NAME="IDX904"></A>
<EM>loading programs</EM>, 
<A NAME="IDX905"></A>
<A NAME="IDX906"></A>
<EM>creating executables</EM>, etc. by issuing the appropriate commands to a Ciao/Prolog top level shell, running in its own buffer as a subprocess. See section <A HREF="ciao_7.html#SEC64">The interactive top-level shell</A> for details. The following commands implement the communication with the Ciao/Prolog top level: 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>t</KBD>
<DD>
Ensure that an inferior Ciao/Prolog top-level process is running. Normally, it is not necessary to use this function since execution of any of the other functions related to the top level ensures that a top level is started (starting one if required). This function is useful when one would like to start a top level in order to type a command directly by hand into it. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>l</KBD>
<DD>
Load the current buffer (and any auxiliary files it may use) into the top level. The type of compilation performed (
<A NAME="IDX907"></A>
<A NAME="IDX908"></A>
<EM>compiling</EM> or 
<A NAME="IDX909"></A>
<A NAME="IDX910"></A>
<EM>interpreting</EM>) is selected automatically depending on whether the buffer has been marked for debugging or not -- see below. In case you try to load a file while in the middle of the debugging process the debugger is first aborted and then the buffer is loaded. Also, if there is a defined query, the user is asked whether it should be called. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>L</KBD>
<DD>
Load the module designed as 
<A NAME="IDX911"></A>
<A NAME="IDX912"></A>
<EM>main module</EM> (and any auxiliary files it may use) into the top level. If no main module is defined it will load the current buffer. The type of compilation performed (
<A NAME="IDX913"></A>
<A NAME="IDX914"></A>
<EM>compiling</EM> or 
<A NAME="IDX915"></A>
<A NAME="IDX916"></A>
<EM>interpreting</EM>) is selected automatically depending on whether the buffer has been marked for debugging or not -- see below. In case you try to load a file while in the middle of the debugging process the debugger is first aborted and then the buffer is loaded. Also, if there is a defined query, the user is asked whether is should be called. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>q</KBD>
<DD>
Set a default query. It is possible to set things up so that this query will be issued any time a program is (re)loaded. The functionality is available in the major mode (i.e., from a buffer containing a source file) and in the inferior mode (i.e., from the buffer running the top-level shell. When called from the major mode it will ask in the minibuffer for the query and when calling from the inferior mode it will get the query on the current line. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>Q</KBD>
<DD>
Ask user if the predefined query should be issued. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>s</KBD>
<DD>
Set the current buffer as the principal module in a multiple module programming environment. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>x</KBD>
<DD>
Make an executable from the code in the current buffer. The buffer must contain a 
<A NAME="IDX917"></A>
<CODE>main/0</CODE> or 
<A NAME="IDX918"></A>
<CODE>main/1</CODE> predicate. Note that compiler options can be set to determine whether the libraries and auxiliary files used by the executable will be statically linked, dynamically linked, auto-loaded, etc. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>o</KBD>
<DD>
Make a Prolog object (.po) file from the code in the current buffer. This is very useful during debugging or program development, when only one or a few files of a large application are modified. If the application executable is dynamically linked, i.e., the component .po files are loaded dynamically during startup of the application, then this command can be used to recompile only the file or files which have changed, and the correct version will be loaded dynamically the next time the application is started. However, note that this only works if the inter-module interfaces have not changed. A safer, but possibly slower way is to generate the executable again, letting the Ciao compiler, which is inherently incremental, determine what needs to be recompiled. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>a</KBD>
<DD>
Make an active module executable from the code in the current buffer. An active module is a remote procedure call server (see the 
<A NAME="IDX919"></A>
<CODE>activemod</CODE> library documentation for details). 
</DL>



<H3><A NAME="SEC98" HREF="ciao_toc.html#TOC98">Locating errors and checking the syntax of assertions</A></H3>

<P>
These commands allow several syntactic checks of assertions, and locating quickly the point in the source code corresponding to errors flagged by the compiler or preprocessor: 
<A NAME="IDX920"></A>
<A NAME="IDX921"></A>
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>`</KBD>
<DD>
Go to the location in the source file containing the next error reported by the last Ciao/Prolog subprocess (preprocessor or toplevel) which was run. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>E</KBD>
<DD>
Check the <EM>syntax</EM> of the code and assertions in the current buffer, as well as imports and exports. Note that full (semantic) assertion checking must be done with the preprocessor. 
</DL>



<H3><A NAME="SEC99" HREF="ciao_toc.html#TOC99">Commands which help in typing in programs</A></H3>

<P>
The following commands are intended to help in the process of writing programs: 
<A NAME="IDX922"></A>
<A NAME="IDX923"></A>
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>I</KBD> <KBD>S</KBD>
<DD>
Insert a (Unix) header at the top of the current buffer so that the ciao script interpreter will be called on this file if <EM>run</EM> from the command line. It also makes the file "executable" (e.g., '<CODE>chmod +x &#60;file&#62;</CODE>' in Unix). See section <A HREF="ciao_10.html#SEC84">The script interpreter</A> for details. 
</DL>



<H3><A NAME="SEC100" HREF="ciao_toc.html#TOC100">Debugging programs</A></H3>

<P>
These commands allow marking modules for 
<A NAME="IDX924"></A>
<A NAME="IDX925"></A>
<EM>debugging</EM> by issuing the appropiate commands to a Ciao/Prolog top level shell, running in its own buffer as a subprocess. There are two differents types of debugging: traditional Prolog debugging (using the 
<A NAME="IDX926"></A>
byrd-box model and 
<A NAME="IDX927"></A>
spy-points) and 
<A NAME="IDX928"></A>
<A NAME="IDX929"></A>
<EM>source-level debugging</EM> (same as traditional debugging plus source tracing and 
<A NAME="IDX930"></A>
breakpoints). 
<A NAME="IDX931"></A>
<A NAME="IDX932"></A>
In order to use 
<A NAME="IDX933"></A>
<A NAME="IDX934"></A>
<EM>breakpoints</EM>, source debugging must be on. The following commands implement comunication with the Ciao/Prolog top level: 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>d</KBD>
<DD>
This is a shortcut which is particularly useful when debugging a single module or file. It corresponds to several lower-level actions. Those lower-level actions depend on how the module was selected for debugging. In case the module was not marked for source-level debugging, it marks the module corresponding to the current buffer for source-level debugging, reloads it to make sure that it is loaded in the correct way for debugging (same as C-c l), and sets the debugger in trace mode (i.e., issues the <CODE>trace.</CODE> command to the top-level shell). Conversely, if the module was already marked for source-level debugging then it will take the opposite actions, i.e., it unmarks the module for source-level debugging, reloads it, and sets the debugger to non-debug mode. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>m</KBD>
<DD>
Mark, or unmkark, the current buffer for debugging (traditional debugging or source debugging). Note that if the buffer has already been loaded while it was unmarked for debugging (and has therefore been loaded in "compile" mode) it has to be loaded again. The minibuffer shows how the module is loaded now and allows selecting another mode for it. There are three posibilities: N for no debug, S for source debug and D for traditional debug. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>M-m</KBD>
<DD>
Visits all Ciao/Prolog files which are currently open in a buffer allowing selecting for each of them whether to debug them or not and the type of debugging performed. When working on a multiple module program, it is possible to have many modules open at a time. In this case, you will navigate through all open Ciao/Prolog files and select the debug mode for each of them (same as doing C-c m for each). 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>b</KBD>
<DD>
Set a breakpoint on the current literal (goal). This can be done at any time (while debugging or not). The cursor must be <EM>on the predicate symbol of the literal</EM>. Breakpoints are only useful when using source-level debugging. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>v</KBD>
<DD>
Remove a breakpoint from the current literal (goal). This can be done at any time (while debugging or not). The cursor must be <EM>on the predicate symbol of the literal</EM>. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>n</KBD>
<DD>
Remove all breakpoints. This can be done at any time (while debugging or not). 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>l</KBD>
<DD>
Redisplay breakpoints in all Ciao buffers. This ensures that the marks in the source files and the Ciao/Prolog toplevel are synchronized. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>r</KBD>
<DD>
Remove breakpoints color in all Ciao/Prolog files. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>t</KBD>
<DD>
Set the debugger to the trace state. In this state, the program is executed step by step. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>d</KBD>
<DD>
Set the debugger to the debug state. In this state, the program will only stop in breakpoints and spypoints. Breakpoints are specially supported in 
<A NAME="IDX935"></A>
<CODE>emacs</CODE> and using source debug. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>r</KBD>
<DD>
Load the current region (between the cursor and a previous mark) into the top level for debugging. Since loading a region of a file is typically done for debugging and/or testing purposes, this command always loads the region in debugging mode (interpreted). 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>p</KBD>
<DD>
Load the predicate around the cursor into the top level. Since loading a single predicate is typically done for debugging and/or testing purposes, this command always loads the predicate in debugging mode (interpreted). 
</DL>



<H3><A NAME="SEC101" HREF="ciao_toc.html#TOC101">Preprocessing programs</A></H3>

<P>
These commands allow 
<A NAME="IDX936"></A>
<A NAME="IDX937"></A>
<EM>preprocessing programs</EM> with 
<A NAME="IDX938"></A>
<CODE>ciaopp</CODE>, the 
<A NAME="IDX939"></A>
<A NAME="IDX940"></A>
<EM>Ciao preprocessor</EM>. 


<P>
 
<A NAME="IDX941"></A>
<CODE>ciaopp</CODE> is the precompiler of the Ciao Prolog development environment. 
<A NAME="IDX942"></A>
<CODE>ciaopp</CODE> can perform a number of program debugging, analysis and source-to-source transformation tasks on (Ciao) Prolog programs. These tasks include: 



<UL>

<LI>

<A NAME="IDX943"></A>
<A NAME="IDX944"></A>
<EM>Inference of properties</EM> of the predicates and literals of the progam, including 
<A NAME="IDX945"></A>
<A NAME="IDX946"></A>
<EM>types</EM>, 
<A NAME="IDX947"></A>
<A NAME="IDX948"></A>
<EM>modes</EM> and other 
<A NAME="IDX949"></A>
<A NAME="IDX950"></A>
<EM>variable instantiation</EM> properties, 
<A NAME="IDX951"></A>
<A NAME="IDX952"></A>
<EM>non-failure</EM>, 
<A NAME="IDX953"></A>
<A NAME="IDX954"></A>
<EM>determinacy</EM>, bounds on 
<A NAME="IDX955"></A>
<A NAME="IDX956"></A>
<EM>computational cost</EM>, bounds on 
<A NAME="IDX957"></A>
<A NAME="IDX958"></A>
<EM>sizes of terms</EM> in the program, etc. 

<LI>Certain kinds of

<A NAME="IDX959"></A>
<A NAME="IDX960"></A>
<EM>static debugging</EM>, finding errors before running the program. This includes checking the ways in which programs call the system library predicates and also 
<A NAME="IDX961"></A>
<A NAME="IDX962"></A>
<EM>checking the assertions</EM> present in the program or in other modules used by the program. Such assertions essentially represent partial 
<A NAME="IDX963"></A>
<A NAME="IDX964"></A>
<EM>specifications</EM> of the program. 

<LI>Several kinds of source to source

<A NAME="IDX965"></A>
<A NAME="IDX966"></A>
<EM>program transformations</EM> such as 
<A NAME="IDX967"></A>
<A NAME="IDX968"></A>
<EM>program specialization</EM>, 
<A NAME="IDX969"></A>
<A NAME="IDX970"></A>
<EM>program parallelization</EM> (including 
<A NAME="IDX971"></A>
<A NAME="IDX972"></A>
<EM>granularity control</EM>), inclusion of 
<A NAME="IDX973"></A>
<A NAME="IDX974"></A>
<EM>run-time tests</EM> for assertions which cannot be checked completely at compile-time, etc. 

</UL>

<P>
The information generated by analysis, the assertions in the system libraries, and the assertions optionally included in user programs as specifications are all written in the same 
<A NAME="IDX975"></A>
<A NAME="IDX976"></A>
<EM>assertion language</EM>, which is in turn also used by the Ciao system documentation generator, 
<A NAME="IDX977"></A>
<CODE>lpdoc</CODE>. 


<P>
<A NAME="IDX978"></A>
<CODE>ciaopp</CODE> is distributed under the 
<A NAME="IDX979"></A>
GNU general public license. 
 


<P>
See the preprocessor manual for details. The following commands implement the communication with the Ciao preprocessor: 
 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>M</KBD>
<DD>
Preprocess the buffer, selecting options. Instructs the preprocessor to load the current buffer and start an interactive dialog in which the different options available in the preprocessor can be set. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>P</KBD>
<DD>
Preprocess the buffer, using the previously selected options. If no options were set previously, then the preprocessor defaults are used. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^V</KBD>
<DD>
Show last output file produced by Ciao preprocessor. The preprocessor works by producing a file which is a transformed and/or adorned (with assertions) version of the input file. This command is often used after running the preprocessor in order to visit the output file and see the results from running the preprocessor. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>V</KBD>
<DD>
Preprocess the buffer, using the previously selected (or default) options, waits for preprocessing to finish and displays the preprocessor output (leaving the cursor at the same point if already on a preprocessor output file). This allows running the preprocessor over and over and watching the output while modifying the source code. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^R</KBD>
<DD>
Ensure that an inferior Ciao preprocessor process is running 
</DL>



<H3><A NAME="SEC102" HREF="ciao_toc.html#TOC102">Version control</A></H3>

<P>
The following commands can be used to carry out a simple form of 
<A NAME="IDX980"></A>
version control by keeping a 
<A NAME="IDX981"></A>
log of changes on a file or a group of related files. This log is kept in a format that is understood by 
<A NAME="IDX982"></A>
<CODE>lpdoc</CODE>, the Ciao documenter [Her99a]. As a result, if these version comments are present, then 
<A NAME="IDX983"></A>
<CODE>lpdoc</CODE> will be able to automatically assign up to date version numbers to the manuals that it generates. This way it is always possible to identify to which version of the software a manual corresponds. Also, 
<A NAME="IDX984"></A>
<CODE>lpdoc</CODE> can create automatically sections describing the changes made since previous versions, which are extracted from the comments in the changelog entries. 


<P>
The main effect of these commands is automatically associate the following information to a set of changes performed in the file and/or in a set of related files: 



<UL>

<LI>a

<A NAME="IDX985"></A>
<A NAME="IDX986"></A>
<EM>version number</EM> (such as, e.g., <CODE>1.2</CODE>, where <CODE>1</CODE> is the 
<A NAME="IDX987"></A>
major version number and <CODE>2</CODE> is the 
<A NAME="IDX988"></A>
minor version number), 

<LI>a

<A NAME="IDX989"></A>
patch number (such as, e.g., the <CODE>4</CODE> in <CODE>1.2#4</CODE>), 

<LI>a

<A NAME="IDX990"></A>
time stamp (such as, e.g., <CODE>1998/12/14,17:20*28+MET</CODE>), 

<LI>the author of the change,

<A NAME="IDX991"></A>
<A NAME="IDX992"></A>
and 

<LI>a comment explaining the change.

<A NAME="IDX993"></A>
<A NAME="IDX994"></A>
</UL>

<P>
The 
<A NAME="IDX995"></A>
version numbering used can be local to a single file or common to a number of related files. A simple version numbering policy is implemented: when a relevant change is made, the user typically inserts a 
<A NAME="IDX996"></A>
changelog entry for it, using the appropriate command (or selecting the corresponding option when prompted while saving a file). This will cause the <EM>patch number</EM> for the file (or for the whole system that the file is part of) to be incremented automatically and the corresponding machine-readable comment to be inserted in the file. Major and minor version numbers can also be changed, but this is always invoked by hand (see below). 


<P>
The changelog entry is written in the form of a 
<A NAME="IDX997"></A>
<CODE>comment/2</CODE> declaration. As mentioned before, the advantage of using this kind of changelog entries is that these declarations can be processed by the 
<A NAME="IDX998"></A>
<CODE>lpdoc</CODE> automatic documenter (see the 
<A NAME="IDX999"></A>
<CODE>lpdoc</CODE> reference manual [Her99a] or the 
<A NAME="IDX1000"></A>
<CODE>assertions</CODE> library documentation for more details on these declarations). 


<P>
Whether the user is asked or not to introduce such changelog entries, and how the patch and version numbers should be increased is controlled by the presence in the file of a 
<A NAME="IDX1001"></A>
<CODE>comment/2</CODE> declaration of the type: 


<P>
<CODE>:- comment(version_maintenance,&#60;type&#62;).</CODE> 


<P>
(note that this requires including the 
<A NAME="IDX1002"></A>
<CODE>assertions</CODE> library in the source file). These declarations themselves are also typically introduced automatically when using this mode (see below). 


<P>
The version maintenance mode can also be set alternatively by inserting a comment such as: 



<PRE>
%% Local Variables: 
%% mode: ciao
%% update-version-comments: "off"
%% End:
</PRE>

<P>
The lines above instruct emacs to put the buffer visiting the file in 
<A NAME="IDX1003"></A>
emacs Ciao/Prolog mode and to turn version maintenance off. Setting the version maintenance mode in this way has the disadvantage that 
<A NAME="IDX1004"></A>
<CODE>lpdoc</CODE>, the auto-documenter, and other related tools will not be aware of the type of version maintenance being performed (the lines above are comments for Prolog). However, this can be useful in fact for setting the 
<A NAME="IDX1005"></A>
<A NAME="IDX1006"></A>
<EM>version maintenance mode for packages</EM> and other files meant for inclusion in other files, since that way the settings will not affect the file in which the package is included. 


<P>
The following commands implement the version control support: 


<DL COMPACT>

<DT><KBD>^X</KBD> <KBD>^S</KBD>
<DD>
This is the standard 
<A NAME="IDX1007"></A>
<CODE>emacs</CODE> command that saves a buffer by writing the contents into the associated <CODE>.pl</CODE> file. However, in Ciao/Prolog mode this command can be set to ask the user before saving whether to introduce a changelog entry documenting the changes performed. 

If the buffer does not already contain a comment specifying the 
<A NAME="IDX1008"></A>
type of version control to be performed, and before saving the buffer, the Ciao/Prolog mode prompts the user to choose among the following options: 

<DL COMPACT>

<DT><KBD>q</KBD>
<DD>
Turn off prompting for the introduction of changelog entries for now. 
<A NAME="IDX1009"></A>
<CODE>emacs</CODE> will not ask again while the buffer is loaded, but it will ask again next time you load the buffer. 

<DT><KBD>n</KBD>
<DD>
Turn off version control for this file. A version control comment such as: 

<CODE>:- comment(version_maintenance,off).</CODE> 

is added to the buffer and the file is saved. 
<A NAME="IDX1010"></A>
<CODE>emacs</CODE> will not perform any version control on this file until the line above is removed or modified (i.e., from now on C-x C-s simply saves the buffer). 

<DT><KBD>y</KBD>
<DD>
Turn version control on for this file. 

</DL>

If <KBD>y</KBD> is selected, then the system prompts again regarding how and where the version and patch number information is to be maintained. The following options are available: 

<DL COMPACT>

<DT><CODE>on</CODE>
<DD>
All version control information will be contained within this file. When saving a buffer (C-x C-s) emacs will ask if a changelog entry should be added to the file before saving. If a comment is entered by the user, a new patch number is assigned to it and the comment is added to the file. This patch number will be the one that follows the most recent changelog entry already in the file. This is obviously useful when maintaining version numbers individually for each file. 

<DT><CODE>&#60;directory_name&#62;</CODE>
<DD>
Global version control will be performed coherently on several files. When saving a buffer (C-x C-s) emacs will ask if a changelog entry should be added to the file before saving. If a comment is given, the global patch number (which will be kept in the file: <CODE>&#60;directory_name&#62;/GlobalPatch</CODE>) is atomically incremented and the changelog entry is added to the current file, associated to that patch number. Also, a small entry is added to a file <CODE>&#60;directory_name&#62;/GlobalChangeLog</CODE> which points to the current file. This allows inspecting all changes sequentially by visiting all the files where the changes were made (see C-c C-n). This is obviously useful when maintaining a single thread of version and patch numbers for a set of files. 

<DT><CODE>off</CODE>
<DD>
Turns off version control: C-x C-s then simply saves the file as usual. 

</DL>

<STRONG>Some useful tips:</STRONG> 


<UL>

<LI>If a changelog entry is in fact introduced, the cursor is left at the point in the file where the comment was inserted and the mark is left at the original file point. This allows inspecting (and possibly modifying) the changelog entry, and then returning to the original point in the file by simply typing C-x C-x.

<LI>

<A NAME="IDX1011"></A>
<A NAME="IDX1012"></A>
The first changelog entry is entered by default at the end of the buffer. Later, the changelog entries can be moved anywhere else in the file. New changelog entries are always inserted just above the first changelog entry which appears in the file. 

<LI>The comments in changelog entries can be edited at any time.

<LI>If a changelog entry is moved to another file, and version numbers are shared by several files through a directory, the corresponding file pointer in the <CODE>&#60;directory_name&#62;/GlobalChangeLog</CODE> file needs to be changed also, for the entry to be locatable later using C-c C-n.

</UL>

 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^S</KBD>
<DD>
Same as C-x C-s except that it forces prompting for inclusion of a changelog entry even if the buffer is unmodified. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>n</KBD>
<DD>
Force a move to a new major/minor version number (the user will be prompted for the new numbers). Only applicable if using directory-based version maintenance. Note that otherwise it suffices with introducing a changelog entry in the file and changing its version number by hand. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^N</KBD>
<DD>
When a unique version numbering is being maintained across several files, this command allows inspecting all changes sequentially by visiting all the files in which the changes were made: 


<UL>

<LI>If in a source file, find the next changelog entry in the source file, open in another window the corresponding

<A NAME="IDX1013"></A>
<CODE>GlobalChangeLog</CODE> file, and position the cursor at the corresponding entry. This allows browsing the previous and following changes made, which may perhaps reside in other files in the system. 

<LI>If in a

<A NAME="IDX1014"></A>
<CODE>GlobalChangeLog</CODE> file, look for the next entry in the file, and open in another window the source file in which the corresponding comment resides, positioning the corresponding comment at the top of the screen. This allows going through a section of the 
<A NAME="IDX1015"></A>
<CODE>GlobalChangeLog</CODE> file checking all the corresponding comments in the different files in which they occur. 

</UL>

 
</DL>



<H3><A NAME="SEC103" HREF="ciao_toc.html#TOC103">Generating program documentation</A></H3>

<P>
These commands provide some bindings and facilities for generating the documentation corresponding to the current buffer. This is specially useful while modifying the documentation for a file, in order to check the output that will be produced. 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>S</KBD>
<DD>
Visit, or create, the <CODE>SETTINGS</CODE> file (which controls all auto-documenter options). 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>F</KBD>
<DD>
Change the default output format used by the LPdoc auto-documenter. It is set by default to <CODE>dvi</CODE> or to the environment variable <CODE>LPDOCFORMAT</CODE> if it is defined. 
<A NAME="IDX1016"></A>
<A NAME="IDX1017"></A>
<A NAME="IDX1018"></A>
<A NAME="IDX1019"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>G</KBD>
<DD>
Generate the documentation according to <CODE>SETTINGS</CODE> in the default format. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>B</KBD>
<DD>
Generate the documentation for the current buffer in the default format. Basically, it sets <CODE>MAIN</CODE> in <CODE>SETTINGS</CODE> to the current buffer and then generates the documentation. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>V</KBD>
<DD>
Start a viewer on the documentation for the current buffer in the default format. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>D</KBD> <KBD>W</KBD>
<DD>
Change the root working dir used by the LPdoc auto-documenter. It is set by default to a new dir under <CODE>/tmp</CODE> or to the environment variable <CODE>LPDOCWDIR</CODE> if it is defined. 
<A NAME="IDX1020"></A>
<A NAME="IDX1021"></A>
<A NAME="IDX1022"></A>
<A NAME="IDX1023"></A>
</DL>



<H3><A NAME="SEC104" HREF="ciao_toc.html#TOC104">Setting the top-level, preprocessor, and documenter executables</A></H3>

<P>
These commands allow 
<A NAME="IDX1024"></A>
<A NAME="IDX1025"></A>
<EM>changing the executables used</EM> when starting a Prolog top-level, the preprocessor, or the auto-documenter. They also allow changing the arguments that these executables take, and changing the path where the libraries reside. In the case of the top-level and preprocessor, this should be done only by users which understand the implications, but it is very useful if several versions of Ciao/Prolog or the preprocessor are available in the system. All these arguments can be changed through the 
<A NAME="IDX1026"></A>
<A NAME="IDX1027"></A>
<EM>customize</EM> options in the help menu (see section <A HREF="ciao_12.html#SEC111">Customization</A>). 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>C</KBD>
<DD>
Change the Ciao/Prolog executable used to run the Prolog-like top level. It is set by default to <CODE>ciao</CODE> or, to the environment variable <CODE>CIAO</CODE> if it is defined. 
<A NAME="IDX1028"></A>
<A NAME="IDX1029"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>^C</KBD>
<DD>
Change the arguments passed to the Ciao/Prolog executable. They are set by default to none or, to the environment variable <CODE>CIAOARGS</CODE> if it is defined. 
<A NAME="IDX1030"></A>
<A NAME="IDX1031"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>P</KBD>
<DD>
Change the executable used to run the Ciao Preprocessor toplevel. It is set by default to <CODE>ciaopp</CODE> or, to the environment variable <CODE>CIAOPP</CODE> if it is defined. 
<A NAME="IDX1032"></A>
<A NAME="IDX1033"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>^P</KBD>
<DD>
Change the arguments passed to the Ciao preprocessor executable. They are set by default to none or to the environment variable <CODE>CIAOPPARGS</CODE> if it is defined. 
<A NAME="IDX1034"></A>
<A NAME="IDX1035"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>L</KBD>
<DD>
Change the location of the Ciao/Prolog library paths (changes the environment variable <CODE>CIAOLIB</CODE>). 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>D</KBD>
<DD>
Change the executable used to run the LPdoc auto-documenter. It is set by default to <CODE>lpdoc</CODE> or to the environment variable <CODE>LPDOC</CODE> if it is defined. 
<A NAME="IDX1036"></A>
<A NAME="IDX1037"></A>
<A NAME="IDX1038"></A>
<A NAME="IDX1039"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>^D</KBD>
<DD>
Change the arguments passed to the LPdoc auto-documenter. They are set by default to none or to the environment variable <CODE>LPDOCARGS</CODE> if it is defined. 
<A NAME="IDX1040"></A>
<A NAME="IDX1041"></A>
<A NAME="IDX1042"></A>
<A NAME="IDX1043"></A>
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>S</KBD> <KBD>^L</KBD>
<DD>
Change the path in which the LPdoc library is installed. It is set by default to <CODE>/home/clip/lib</CODE> or to the environment variable <CODE>LPDOCLIB</CODE> if it is defined. 
<A NAME="IDX1044"></A>
<A NAME="IDX1045"></A>
<A NAME="IDX1046"></A>
<A NAME="IDX1047"></A>
</DL>



<H3><A NAME="SEC105" HREF="ciao_toc.html#TOC105">Traditional Prolog Mode Commands</A></H3>

<P>
These commands provide some bindings and facilities for loading programs, which are present in emacs Prolog modes of other Prolog systems (e.g., SICStus). This is useful mainly if the Ciao/Prolog emacs mode is used with such Prolog systems. Note that the behavior of these commands in Ciao is slightly different from that of SICStus and their use (
<A NAME="IDX1048"></A>
<CODE>compile/1</CODE> and 
<A NAME="IDX1049"></A>
<CODE>consult/1</CODE>) in the Ciao top-level are not recommended. 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>K</KBD>
<DD>
Compile the entire buffer. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>k</KBD>
<DD>
Compile a given region. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^K</KBD>
<DD>
Compile the predicate around point. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>C</KBD>
<DD>
Consult the entire buffer. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>c</KBD>
<DD>
Consult a given region. 
</DL>

<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^C</KBD>
<DD>
Consult the predicate around point. 
</DL>



<H3><A NAME="SEC106" HREF="ciao_toc.html#TOC106">Other commands</A></H3>

<P>
Some other commands which are active in the Ciao/Prolog mode: 
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>^L</KBD>
<DD>
Recenter the most recently used Ciao/Prolog inferior process buffer (top-level or preprocessor). 
</DL>



<H3><A NAME="SEC107" HREF="ciao_toc.html#TOC107">Getting the Ciao/Prolog mode version</A></H3>

<P>
<A NAME="IDX1050"></A>
<A NAME="IDX1051"></A>
<DL COMPACT>

<DT><KBD>^C</KBD> <KBD>v</KBD>
<DD>
Report the version of the emacs Ciao/Prolog mode. 
</DL>

<P>
 




<H2><A NAME="SEC108" HREF="ciao_toc.html#TOC108">Commands available in toplevel and preprocessor buffers</A></H2>

<P>
The interactive top level and the preprocessor both are typically run in an iteractive buffer, in which it is possible to communicate with them in the same way as is they had been started from a standard shell. In addition, the commands and key bindings available in buffers containing source code are also available in these interactive buffers, when applicable. 




<H2><A NAME="SEC109" HREF="ciao_toc.html#TOC109">Using Ciao/Prolog mode capabilities in standard shells</A></H2>

<P>
The capabilities (commands, coloring, ...) which are active in the Ciao/Prolog "inferior" mode (the mode of the buffers in which the top level and the preprocessor run) can also be made available in any standard command line shell which is being run within emacs. This can be enabled by going to the buffer in which the shell is running and typing "<KBD>M-x</KBD> <CODE>ciao-inferior-mode</CODE>". This is very useful for example when running the stand-alone compiler, the 
<A NAME="IDX1052"></A>
<CODE>lpdoc</CODE> auto-documenter, or even certain user applications (those that use the standard error message library) in an emacs sub-shell. Turning the Ciao/Prolog inferior mode on on that sub-shell will highlight and color the error messages, and automatically find and visit the locations in the files in which the errors are reported. 




<H2><A NAME="SEC110" HREF="ciao_toc.html#TOC110">Coexistence with other Prolog interfaces</A></H2>

<P>
As mentioned previously, the Ciao/Prolog 
<A NAME="IDX1053"></A>
<CODE>emacs</CODE> interface can also be used to work with other Prolog or CLP systems. Also, the Ciao/Prolog 
<A NAME="IDX1054"></A>
<CODE>emacs</CODE> interface (<EM>mode</EM>) can coexist with other Prolog-related 
<A NAME="IDX1055"></A>
<CODE>emacs</CODE> interfaces (<EM>modes</EM>) 
<A NAME="IDX1056"></A>
<A NAME="IDX1057"></A>
(such as, e.g., the 
<A NAME="IDX1058"></A>
<CODE>SICStus</CODE> Prolog interface). Only one of the interfaces can be active at a time for a given buffer (i.e., for each given file opened inside 
<A NAME="IDX1059"></A>
<CODE>emacs</CODE>). In order the change a buffer to a given interface, move the cursor to that buffer and type <CODE>M-x ...-mode</CODE> (e.g., for the Ciao/Prolog mode, <CODE>M-x ciao-mode</CODE>). 


<P>
If several Prolog-related 
<A NAME="IDX1060"></A>
<CODE>emacs</CODE> interfaces are loaded, then typically the <EM>last</EM> one to be loaded takes precedence, in the sense that this will be the interface in which 
<A NAME="IDX1061"></A>
<CODE>emacs</CODE> will be set when opening files which have a <CODE>.pl</CODE> ending (this depends a bit on how things are set up in your <CODE>.emacs</CODE> file). 




<H2><A NAME="SEC111" HREF="ciao_toc.html#TOC111">Customization</A></H2>

<P>
This section explains all variables used in the Ciao/Prolog emacs mode which can be customized by users. Such customization can be performed (in later versions of 
<A NAME="IDX1062"></A>
<CODE>emacs</CODE>) from the 
<A NAME="IDX1063"></A>
<CODE>emacs</CODE> menus (<CODE>Help -&#62; Customize -&#62; Top-level Customization Group</CODE>), or also by adding a <CODE>setq</CODE> expression in the <CODE>.emacs</CODE> file. Such <CODE>setq</CODE> expression should be similar to: 


<P>
<CODE>(setq &#60;variable&#62; &#60;new_value&#62;)</CODE> 


<P>
The following sections list the different variables which can be customized for 
<A NAME="IDX1064"></A>
<CODE>ciao</CODE>, 
<A NAME="IDX1065"></A>
<CODE>ciaopp</CODE> and 
<A NAME="IDX1066"></A>
<CODE>lpdoc</CODE>. 



<UL>
<LI><A HREF="ciao_12.html#SEC112">Ciao variables</A>
<LI><A HREF="ciao_12.html#SEC113">CiaoPP variables</A>
<LI><A HREF="ciao_12.html#SEC114">LPdoc variables</A>
</UL>



<H3><A NAME="SEC112" HREF="ciao_toc.html#TOC112">Ciao variables</A></H3>
<DL COMPACT>

<DT><CODE>ciao-debug-breakpoint-color</CODE> (<EM>face</EM>)
<DD>
Color to use with breakpoints in source debugger. 
<DT><CODE>ciao-debug-call-color</CODE> (<EM>face</EM>)
<DD>
Color to use with the call port in source debugger. 
<DT><CODE>ciao-debug-exit-color</CODE> (<EM>face</EM>)
<DD>
Color to use with the exit port in source debugger. 
<DT><CODE>ciao-debug-expansion</CODE> (<EM>face</EM>)
<DD>
Color to use in source debugger when the predicate was not found. 
<DT><CODE>ciao-debug-fail-color</CODE> (<EM>face</EM>)
<DD>
Color to use with the fail port in source debugger. 
<DT><CODE>ciao-debug-redo-color</CODE> (<EM>face</EM>)
<DD>
Color to use with the redo port in source debugger. 
<DT><CODE>ciao-directives-face</CODE> (<EM>face</EM>)
<DD>
Color to fontify the Ciao/Prolog predicate directives. 
<DT><CODE>ciao-indent-width</CODE> (<EM>integer</EM>)
<DD>
Indentation for a new goal. 
<DT><CODE>ciao-main-buffer</CODE> (<EM>string</EM>)
<DD>
Name of main module in a multiple module program. It is very useful when reloading from an inferior module because reload is performed from the main module, thus also reloading all dependent modules. 
<DT><CODE>ciao-ociao-builtin-face</CODE> (<EM>face</EM>)
<DD>
Color to fontify the Ciao/Prolog builtin directives. 
<DT><CODE>ciao-ociao-directives-face</CODE> (<EM>face</EM>)
<DD>
Color to fontify the Ciao/Prolog O'Ciao directives. 
<DT><CODE>ciao-query</CODE> (<EM>string</EM>)
<DD>
Query to use in Ciao. Setting this is useful when using a long or complicated query because it saves from having to type it over and over again. It is possible to set that this query will be issued any time a program is (re)loaded. 
<DT><CODE>ciao-system</CODE> (<EM>string</EM>)
<DD>
Name of Ciao or Prolog executable which runs the classical Prolog-like top level. 
<DT><CODE>ciao-system-args</CODE> (<EM>string</EM>)
<DD>
*Arguments passed to Ciao/Prolog toplevel executable. 
<DT><CODE>ciao-toplevel-buffer-name</CODE> (<EM>string</EM>)
<DD>
Basic name of the buffer running the Ciao/Prolog toplevel inferior process. 
</DL>



<H3><A NAME="SEC113" HREF="ciao_toc.html#TOC113">CiaoPP variables</A></H3>
<DL COMPACT>

<DT><CODE>ciao-ciaopp-buffer-name</CODE> (<EM>string</EM>)
<DD>
Basic name of the buffer running the Ciao preprocessor inferior process. 
<DT><CODE>ciao-ciaopp-system</CODE> (<EM>string</EM>)
<DD>
Name of Ciao preprocessor executable. 
<DT><CODE>ciao-ciaopp-system-args</CODE> (<EM>string</EM>)
<DD>
Arguments passed to Ciao preprocessor executable. 
</DL>



<H3><A NAME="SEC114" HREF="ciao_toc.html#TOC114">LPdoc variables</A></H3>
<DL COMPACT>

<DT><CODE>ciao-lpdoc-buffer-name</CODE> (<EM>string</EM>)
<DD>
Basic name of the buffer running the auto-documenter inferior process. 
<DT><CODE>ciao-lpdoc-docformat</CODE> (<EM>symbol</EM>)
<DD>
Name of default output format used by LPdoc. 
<DT><CODE>ciao-lpdoc-libpath</CODE> (<EM>directory</EM>)
<DD>
Path in which the LPdoc library is installed. 
<DT><CODE>ciao-lpdoc-system</CODE> (<EM>string</EM>)
<DD>
Name of LPdoc auto-documenter executable. 
<DT><CODE>ciao-lpdoc-system-args</CODE> (<EM>string</EM>)
<DD>
Arguments passed to LPdoc executable. 
<DT><CODE>ciao-lpdoc-wdir-root</CODE> (<EM>directory</EM>)
<DD>
Name of root working dir used by LPdoc. 
</DL>
<P>
 




<H2><A NAME="SEC115" HREF="ciao_toc.html#TOC115">Installation of the Ciao/Prolog emacs interface</A></H2>

<P>
If opening a file ending with <CODE>.pl</CODE> puts emacs in another mode (such as 
<A NAME="IDX1067"></A>
<CODE>perl</CODE> mode, which is the --arguably incorrect-- default setting in some 
<A NAME="IDX1068"></A>
<CODE>emacs</CODE> distributions), then you can set things so that the Ciao/Prolog mode is loaded by default in your system. This can be done by including in your 
<A NAME="IDX1069"></A>
<CODE>.emacs</CODE> file a line such as: 


<P>
<CODE>(load &#60;CIAOLIBDIR&#62;/DOTemacs)</CODE> 


<P>
This loads the above mentioned file from the Ciao library, which contains the following lines (except that the paths are changed during installation to appropriate values for your system): 



<PRE>
;; Ciao / @&#38;-Prolog / Prolog mode
;; (can be used for SICStus, and coexist with SICStus Prolog prolog.el)
;; 
(setq load-path (cons "&#60;CIAOLIBDIR&#62;" load-path))
(autoload 'run-ciao-toplevel "ciao"
          "Start a Ciao / @&#38;-Prolog / Prolog top-level sub-process." t)
(autoload 'run-ciao-preprocessor "ciao"
          "Start a Ciao / @&#38;-Prolog / Prolog preprocessor sub-process." t)
(autoload 'ciao-mode "ciao"
          "Major mode for edit/run Ciao, Prolog, @&#38;-Prolog" t)
(autoload 'ciao-inferior-mode "ciao"
          "Major mode for running Ciao, Prolog, lpdoc, etc." t)
(setq auto-mode-alist (cons '("\\.pl$" . ciao-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.pls$" . ciao-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.lpdoc$" . ciao-mode) auto-mode-alist))
(setq completion-ignored-extensions
      (append '(".dep" ".itf" ".po" ".asr" ".cpx")
              completion-ignored-extensions))
;; ------------------------------------------------------------------------
;; In Un*x, the following (or similar) lines should be included in your
;; .cshrc or .profile to find the manuals (the Ciao installation leaves
;; in the Ciao library directory 'DOTcshrc' and 'DOTprofile' files with
;; the right paths which can be included directly in your startup scripts):
;; 
;; setenv INFOPATH /usr/local/info:/usr/info:&#60;LPDOCDIR&#62;
;; ------------------------------------------------------------------------

</PRE>

<P>
If you would like to configure things in a different way, you can also copy the contents of this file to your 
<A NAME="IDX1070"></A>
<CODE>.emacs</CODE> file and make the appropriate changes. For example, if you do not want <CODE>.pl</CODE> files to be put automatically in Ciao/Prolog mode, then comment out (or remove) the line: 


<P>
<CODE>(setq auto-mode-alist</CODE> ... <CODE>)</CODE> 


<P>
You will then need to switch manually to Ciao/Prolog mode by typing <CODE>M-x ciao-mode</CODE> after opening a Prolog file. 


<P>
If you are able to open the Ciao/Prolog menu but the Ciao manuals are not found or the 
<A NAME="IDX1071"></A>
<CODE>ciao</CODE> command (the top-level) is not found when loading <CODE>.pl</CODE> files, the probable cause is that you do not have the Ciao paths in the <CODE>INFOPATH</CODE> and <CODE>MANPATH</CODE> 
<A NAME="IDX1072"></A>
<A NAME="IDX1073"></A>
<EM>environment variables</EM> (whether these variables are set automatically or not for users depends on how the Ciao system was installed). Under Un*x, you can add these paths easily by including the line: 


<P>
<CODE>source &#60;CIAOLIBDIR&#62;/DOTcshrc</CODE> 


<P>
in your <CODE>.login</CODE> or <CODE>.cshrc</CODE> files if you are using 
<A NAME="IDX1074"></A>
<CODE>csh</CODE> (or 
<A NAME="IDX1075"></A>
<CODE>tcsh</CODE>, etc.), or, alternatively, the line: 


<P>
<CODE>. &#60;CIAOLIBDIR&#62;/DOTprofile</CODE> 


<P>
in your <CODE>.login</CODE> or <CODE>.profile</CODE> files if you are using 
<A NAME="IDX1076"></A>
<CODE>sh</CODE> (or 
<A NAME="IDX1077"></A>
<CODE>bash</CODE>, etc.). See the Ciao installation instructions (section <A HREF="ciao_148.html#SEC556">Installing Ciao from the source distribution</A> or section <A HREF="ciao_149.html#SEC565">Installing Ciao from a Win32 binary distribution</A>) for details. 




<H2><A NAME="SEC116" HREF="ciao_toc.html#TOC116">Emacs version compatibility</A></H2>
<P>
This mode is currently being developed within 
<A NAME="IDX1078"></A>
<CODE>GNU emacs</CODE> version 20.4. It should also work with all other 20.XX and later 19.XX versions. 




<H2><A NAME="SEC117" HREF="ciao_toc.html#TOC117">Acknowledgments (ciao.el)</A></H2>

<P>
This code is derived from the 1993 version of the emacs interface for 
<A NAME="IDX1079"></A>
&#38;-Prolog by M. Hermenegildo, itself derived from the original 
<A NAME="IDX1080"></A>
<CODE>prolog.el</CODE> by 
<A NAME="IDX1081"></A>
<A NAME="IDX1082"></A>
<EM>Masanobu Umeda</EM> with changes by 
<A NAME="IDX1083"></A>
<A NAME="IDX1084"></A>
<EM>Johan Andersson</EM>, 
<A NAME="IDX1085"></A>
<A NAME="IDX1086"></A>
<EM>Peter Olin</EM>, 
<A NAME="IDX1087"></A>
<A NAME="IDX1088"></A>
<EM>Mats Carlsson</EM>, and 
<A NAME="IDX1089"></A>
<A NAME="IDX1090"></A>
<EM>Johan Bevemyr</EM> of 
<A NAME="IDX1091"></A>
<A NAME="IDX1092"></A>
<EM>SICS</EM>, Sweden. Other changes also by Daniel Cabeza and Manuel C. Rodriguez. See the changelog for details.


<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_11.html">previous</A>, <A HREF="ciao_13.html">next</A>, <A HREF="ciao_158.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
