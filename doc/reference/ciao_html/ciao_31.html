<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 20 December 2001 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Attributed variables</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_30.html">previous</A>, <A HREF="ciao_32.html">next</A>, <A HREF="ciao_219.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC177" HREF="ciao_toc.html#TOC177">Attributed variables</A></H1>
<P>
<A NAME="IDX2019"></A>


<P>
<STRONG>Author(s):</STRONG> Christian Holzbaur, Daniel Cabeza, Manuel Carro.


<P>
<STRONG>Version:</STRONG> 1.7#144 (2001/11/12, 17:57:47 CET)


<P>
<STRONG>Version of last change:</STRONG> 1.5#157 (2000/5/30, 13:4:47 CEST)


<P>
These predicates allow the manipulation of 
<A NAME="IDX2020"></A>
<A NAME="IDX2021"></A>
<EM>attributed variables</EM>. Attributes are special terms which are attached to a (free) variable, and are hidden from the normal Prolog computation. They can only be treated by using the predicates below.



<UL>
<LI><A HREF="ciao_31.html#SEC178">Usage and interface (attributes)</A>
<LI><A HREF="ciao_31.html#SEC179">Documentation on exports (attributes)</A>
<LI><A HREF="ciao_31.html#SEC180">Documentation on multifiles (attributes)</A>
<LI><A HREF="ciao_31.html#SEC181">Other information (attributes)</A>
</UL>



<H2><A NAME="SEC178" HREF="ciao_toc.html#TOC178">Usage and interface (<CODE>attributes</CODE>)</A></H2>

<div class="cartouche">

<UL>

<LI><STRONG>Library usage:</STRONG>

These predicates are builtin in Ciao, so nothing special has to be done to use them.

<LI><STRONG>Exports:</STRONG>


<UL>

<LI><EM>Predicates:</EM>

<A NAME="IDX2022"></A>
<CODE>attach_attribute/2</CODE>, 
<A NAME="IDX2023"></A>
<CODE>get_attribute/2</CODE>, 
<A NAME="IDX2024"></A>
<CODE>update_attribute/2</CODE>, 
<A NAME="IDX2025"></A>
<CODE>detach_attribute/1</CODE>.

<LI><EM>Multifiles:</EM>

<A NAME="IDX2026"></A>
<CODE>verify_attribute/2</CODE>, 
<A NAME="IDX2027"></A>
<CODE>combine_attributes/2</CODE>.

</UL>

</UL>

</div class="cartouche">



<H2><A NAME="SEC179" HREF="ciao_toc.html#TOC179">Documentation on exports (<CODE>attributes</CODE>)</A></H2>
<P>
<A NAME="IDX2028"></A>
<A NAME="IDX2029"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>attach_attribute/2:</B>
<DD><A NAME="IDX2030"></A>


<P>
<STRONG>Usage 1:</STRONG> <CODE>attach_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Attach attribute <CODE>Attr</CODE> to <CODE>Var</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> <CODE>attach_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Attach attribute <CODE>Attr</CODE> to <CODE>Var</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX2031"></A>
<A NAME="IDX2032"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>get_attribute/2:</B>
<DD><A NAME="IDX2033"></A>


<P>
<STRONG>Usage 1:</STRONG> <CODE>get_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Unify <CODE>Attr</CODE> with the attribute of <CODE>Var</CODE>, or fail if <CODE>Var</CODE> has no attribute.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
<LI><EM>The following properties should hold upon exit:</EM>

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> <CODE>get_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Unify <CODE>Attr</CODE> with the attribute of <CODE>Var</CODE>, or fail if <CODE>Var</CODE> has no attribute.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
<LI><EM>The following properties should hold upon exit:</EM>

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX2034"></A>
<A NAME="IDX2035"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>update_attribute/2:</B>
<DD><A NAME="IDX2036"></A>


<P>
<STRONG>Usage 1:</STRONG> <CODE>update_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Change the attribute of attributed variable <CODE>Var</CODE> to <CODE>Attr</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> <CODE>update_attribute(Var,Attr)</CODE>

<UL>
<LI><EM>Description:</EM> Change the attribute of attributed variable <CODE>Var</CODE> to <CODE>Attr</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX2037"></A>
<A NAME="IDX2038"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>detach_attribute/1:</B>
<DD><A NAME="IDX2039"></A>


<P>
<STRONG>Usage 1:</STRONG> <CODE>detach_attribute(Var)</CODE>

<UL>
<LI><EM>Description:</EM> Take out the attribute from the attributed variable <CODE>Var</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> <CODE>detach_attribute(Var)</CODE>

<UL>
<LI><EM>Description:</EM> Take out the attribute from the attributed variable <CODE>Var</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
</UL>

</DL>



<H2><A NAME="SEC180" HREF="ciao_toc.html#TOC180">Documentation on multifiles (<CODE>attributes</CODE>)</A></H2>
<P>
<A NAME="IDX2040"></A>
<A NAME="IDX2041"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>verify_attribute/2:</B>
<DD><A NAME="IDX2042"></A>


<P>
The predicate is <EM>multifile</EM>.


<P>
<STRONG>Usage:</STRONG> <CODE>verify_attribute(Attr,Term)</CODE>

<UL>
<LI><EM>Description:</EM> <EM>A user defined predicate.</EM> This predicate is called when an attributed variable with attribute <CODE>Attr</CODE> is about to be unified with the non-variable term <CODE>Term</CODE>. The user should define this predicate (as multifile) in the modules implementing special unification.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Attr</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)

<CODE>Term</CODE> is currently a term which is not a free variable.
 (<CODE>term_typing:nonvar/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX2043"></A>
<A NAME="IDX2044"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>combine_attributes/2:</B>
<DD><A NAME="IDX2045"></A>


<P>
The predicate is <EM>multifile</EM>.


<P>
<STRONG>Usage:</STRONG> <CODE>combine_attributes(Var1,Var2)</CODE>

<UL>
<LI><EM>Description:</EM> <EM>A user defined predicate.</EM> This predicate is called when two attributed variables with attributes <CODE>Var1</CODE> and <CODE>Var2</CODE> are about to be unified. The user should define this predicate (as multifile) in the modules implementing special unification.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Var1</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)

<CODE>Var2</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
</UL>

</DL>



<H2><A NAME="SEC181" HREF="ciao_toc.html#TOC181">Other information (<CODE>attributes</CODE>)</A></H2>

<P>
Note that 
<A NAME="IDX2046"></A>
<CODE>combine_attributes/2</CODE> and 
<A NAME="IDX2047"></A>
<CODE>verify_attribute/2</CODE> are not called with the attributed variables involved, but with the corresponding attributes instead. The reasons are: 



<UL>

<LI>There are simple applications which only refer to the attributes.

<LI>If the application wants to refer to the attributed variables themselves, they can be made part the attribute term. The implementation of

<A NAME="IDX2048"></A>
<CODE>freeze/2</CODE> utilizes this technique. Note that this does not lead to cyclic structures, as the connection between an attributed variable and its attribute is invisible to the pure parts of the Prolog implementation. 

<LI>If attributed variables were passed as arguments, the user code would have to refer to the attributes through an extra call to

<A NAME="IDX2049"></A>
<CODE>get_attribute/2</CODE>. 

<LI>As the/one attribute is the first argument to each of the two predicates, indexing applies. Note that attributed variables themselves look like variables to the indexing mechanism.

</UL>

<P>
However, future improvements may change or extend the interface to attributed variables in order to provide a richer and more expressive interface. 


<P>
For customized output of attributed variables, please refer to the documentation of the predicate 
<A NAME="IDX2050"></A>
<CODE>portray_attribute/2</CODE>. 


<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_30.html">previous</A>, <A HREF="ciao_32.html">next</A>, <A HREF="ciao_219.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
