<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 11 July 2001 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - The Ciao lpmake scripting facility</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_166.html">previous</A>, <A HREF="ciao_168.html">next</A>, <A HREF="ciao_216.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC645" HREF="ciao_toc.html#TOC645">The Ciao lpmake scripting facility</A></H1>

<P>
<STRONG>Author(s):</STRONG> Manuel Hermenegildo.


<P>
 


<P>
<STRONG>Note:</STRONG> 
<A NAME="IDX6793"></A>
<CODE>lpmake</CODE> and the 
<A NAME="IDX6794"></A>
<CODE>make</CODE> library are still under active development, and they may change substantially in future releases. 


<P>
<A NAME="IDX6795"></A>
<CODE>lpmake</CODE> is a Ciao application which uses the Ciao 
<A NAME="IDX6796"></A>
<CODE>make</CODE> library to implement a dependency-driven scripts in a similar way to the Unix 
<A NAME="IDX6797"></A>
<CODE>make</CODE> facility. 


<P>
The original purpose of the Unix 
<A NAME="IDX6798"></A>
<CODE>make</CODE> utility was to determine automatically which pieces of a large program needed to be recompiled, and issue the commands to recompile them. In fact, 
<A NAME="IDX6799"></A>
<CODE>make</CODE> is often used for many other purposes: it can be used to describe any task where some files must be updated automatically from others whenever the others change. 


<P>
To prepare to use 
<A NAME="IDX6800"></A>
<CODE>lpmake</CODE>, you must write a file (typically called 
<A NAME="IDX6801"></A>
<CODE>Makefile.pl</CODE>) that describes the relationships among files in your program or application, and states the commands for updating each file. In a program, typically the executable file is updated from object files, which are in turn made by compiling source files. 


<P>
Once a suitable makefile exists, each time you change some source files, simply typing <CODE>lpmake</CODE> suffices to perform all necessary recompilations. The 
<A NAME="IDX6802"></A>
<CODE>make</CODE> program uses the makefile data base and the last modification times of the files to decide which of the files need to be updated. For each of those files, it issues the commands recorded in the data base. 


<P>
<A NAME="IDX6803"></A>
<CODE>lpmake</CODE> executes commands in the 
<A NAME="IDX6804"></A>
<CODE>Makefile.pl</CODE> to update one or more target <EM>names</EM>, where <EM>name</EM> is typically a program, but can also be a file to be generated or even a "virtual" target. If no <CODE>-l</CODE> or <CODE>-m</CODE> options are present, 
<A NAME="IDX6805"></A>
<CODE>lpmake</CODE> will look for the makefile 
<A NAME="IDX6806"></A>
<CODE>Makefile.pl</CODE>. 


<P>
<A NAME="IDX6807"></A>
<CODE>lpmake</CODE> updates a target if it depends on prerequisite files that have been modified since the target was last modified, or if the target does not exist. 


<P>
You can provide command line arguments to 
<A NAME="IDX6808"></A>
<CODE>lpmake</CODE> to control which files should be regenerated, or how. 


<P>
<STRONG>Note:</STRONG> if you use 
<A NAME="IDX6809"></A>
<CODE>make</CODE> and 
<A NAME="IDX6810"></A>
<CODE>functions</CODE>, then 
<A NAME="IDX6811"></A>
<CODE>make</CODE> should appear before 
<A NAME="IDX6812"></A>
<CODE>functions</CODE> in the list of packages. 


<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_166.html">previous</A>, <A HREF="ciao_168.html">next</A>, <A HREF="ciao_216.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
