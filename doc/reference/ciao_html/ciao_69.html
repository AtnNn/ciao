<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 6 May 2002 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Prolog system internal predicates</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_68.html">previous</A>, <A HREF="ciao_70.html">next</A>, <A HREF="ciao_214.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC291" HREF="ciao_toc.html#TOC291">Prolog system internal predicates</A></H1>
<P>
<A NAME="IDX3574"></A>


<P>
<STRONG>Author(s):</STRONG> Manuel Carro, Daniel Cabeza, Mats Carlsson.


<P>
<STRONG>Version:</STRONG> 1.7#195 (2002/4/12, 14:21:57 CEST)


<P>
<STRONG>Version of last change:</STRONG> 1.5#153 (2000/5/29, 10:24:35 CEST)


<P>
This module implements some miscellaneous predicates which provide access to some internal statistics, special properties of the predicates, etc.



<UL>
<LI><A HREF="ciao_69.html#SEC292">Usage and interface (prolog_sys)</A>
<LI><A HREF="ciao_69.html#SEC293">Documentation on exports (prolog_sys)</A>
<LI><A HREF="ciao_69.html#SEC294">Documentation on internals (prolog_sys)</A>
<LI><A HREF="ciao_69.html#SEC295">Known bugs and planned improvements (prolog_sys)</A>
</UL>



<H2><A NAME="SEC292" HREF="ciao_toc.html#TOC292">Usage and interface (<CODE>prolog_sys</CODE>)</A></H2>

<div class="cartouche">

<UL>

<LI><STRONG>Library usage:</STRONG>

<CODE>:- use_module(library(prolog_sys)).</CODE>

<LI><STRONG>Exports:</STRONG>


<UL>

<LI><EM>Predicates:</EM>

<A NAME="IDX3575"></A>
<CODE>statistics/0</CODE>, 
<A NAME="IDX3576"></A>
<CODE>statistics/2</CODE>, 
<A NAME="IDX3577"></A>
<CODE>predicate_property/2</CODE>, 
<A NAME="IDX3578"></A>
<CODE>current_atom/1</CODE>, 
<A NAME="IDX3579"></A>
<CODE>garbage_collect/0</CODE>, 
<A NAME="IDX3580"></A>
<CODE>new_atom/1</CODE>.

</UL>

</UL>

</div class="cartouche">



<H2><A NAME="SEC293" HREF="ciao_toc.html#TOC293">Documentation on exports (<CODE>prolog_sys</CODE>)</A></H2>
<P>
<A NAME="IDX3581"></A>
<A NAME="IDX3582"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>statistics/0:</B>
<DD><A NAME="IDX3583"></A>


<P>
<STRONG>Usage:</STRONG> 

<UL>
<LI><EM>Description:</EM> Prints statistics about the system.

</UL>

</DL>

<P>
<A NAME="IDX3584"></A>
<A NAME="IDX3585"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>statistics/2:</B>
<DD><A NAME="IDX3586"></A>


<P>
<STRONG>Usage 1:</STRONG> <CODE>statistics(Time_option,Time_result)</CODE>

<UL>
<LI><EM>Description:</EM> Gather information about time (either process time or wall time) since last consult or since start of program. Results are returned in milliseconds.

<LI><EM>The following properties should hold at call time:</EM>

Options to get information about execution time. <CODE>Time_option</CODE> must be one of <CODE>runtime</CODE>, <CODE>walltime</CODE>.
 (<CODE>prolog_sys:time_option/1</CODE>)

<CODE>Time_result</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

Options to get information about execution time. <CODE>Time_option</CODE> must be one of <CODE>runtime</CODE>, <CODE>walltime</CODE>.
 (<CODE>prolog_sys:time_option/1</CODE>)

<CODE>Time_result</CODE> is a two-element list of integers. The first integer is the time since the start of the execution; the second integer is the time since the previous consult to time.
 (<CODE>prolog_sys:time_result/1</CODE>)
</UL>

<P>
<STRONG>Usage 2:</STRONG> <CODE>statistics(Memory_option,Memory_result)</CODE>

<UL>
<LI><EM>Description:</EM> Gather information about memory consumption.

<LI><EM>The following properties should hold at call time:</EM>

Options to get information about memory usage.
 (<CODE>prolog_sys:memory_option/1</CODE>)

<CODE>Memory_result</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

Options to get information about memory usage.
 (<CODE>prolog_sys:memory_option/1</CODE>)

Result is a two-element list of integers. The first element is the space taken up by the option selected, measured in bytes; the second integer is zero for program space (which grows as necessary), and the amount of free space otherwise.
 (<CODE>prolog_sys:memory_result/1</CODE>)
</UL>

<P>
<STRONG>Usage 3:</STRONG> <CODE>statistics(Garbage_collection_option,Gc_result)</CODE>

<UL>
<LI><EM>Description:</EM> Gather information about garbage collection.

<LI><EM>The following properties should hold at call time:</EM>

Options to get information about garbage collection.
 (<CODE>prolog_sys:garbage_collection_option/1</CODE>)

<CODE>Gc_result</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

Options to get information about garbage collection.
 (<CODE>prolog_sys:garbage_collection_option/1</CODE>)

<CODE>Gc_result</CODE> is a tree-element list of integers, related to 
<A NAME="IDX3587"></A>
garbage collection and 
<A NAME="IDX3588"></A>
memory management. When <CODE>stack_shifts</CODE> is selected, the first one is the number of shifts (reallocations) of the local stack; the second is the number of shifts of the trail, and the third is the time spent in these shifts. When <CODE>garbage_collection</CODE> is selected, the numbers are, respectively, the number of garbage collections performed, the number of bytes freed, and the time spent in garbage collection.
 (<CODE>prolog_sys:gc_result/1</CODE>)
</UL>

<P>
<STRONG>Usage 4:</STRONG> <CODE>statistics(Symbol_option,Symbol_result)</CODE>

<UL>
<LI><EM>Description:</EM> Gather information about number of symbols and predicates.

<LI><EM>The following properties should hold at call time:</EM>

Option to get information about the number of symbols in the program.
 (<CODE>prolog_sys:symbol_option/1</CODE>)

<CODE>Symbol_result</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

Option to get information about the number of symbols in the program.
 (<CODE>prolog_sys:symbol_option/1</CODE>)

<CODE>Symbol_result</CODE> is a two-element list of integers. The first one is the number of atom, functor, and predicate names in the symbol table. The second is the number of predicates known to be defined (although maybe without clauses).
 (<CODE>prolog_sys:symbol_result/1</CODE>)
</UL>

<P>
<STRONG>Usage 5:</STRONG> <CODE>statistics(Option,?term)</CODE>

<UL>
<LI><EM>Description:</EM> If <CODE>Option</CODE> is unbound, it is bound to the values on the other cases.

</UL>

</DL>

<P>
<A NAME="IDX3589"></A>
<A NAME="IDX3590"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>predicate_property/2:</B>
<DD><A NAME="IDX3591"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>predicate_property(Head,Property)</CODE>

<UL>
<LI><EM>Description:</EM> The predicate with clause <CODE>Head</CODE> is <CODE>Property</CODE>.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Head</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)

<CODE>Property</CODE> is any term.
 (<CODE>basic_props:term/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

<CODE>Head</CODE> is a term which represents a goal, i.e., an atom or a structure.
 (<CODE>basic_props:callable/1</CODE>)

<CODE>Property</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX3592"></A>
<A NAME="IDX3593"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>current_atom/1:</B>
<DD><A NAME="IDX3594"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>current_atom(Atom)</CODE>

<UL>
<LI><EM>Description:</EM> Enumerates on backtracking all the existing atoms in the system.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Atom</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

<CODE>Atom</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX3595"></A>
<A NAME="IDX3596"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>garbage_collect/0:</B>
<DD><A NAME="IDX3597"></A>


<P>
<STRONG>Usage:</STRONG> 

<UL>
<LI><EM>Description:</EM> Forces garbage collection when called.

</UL>

</DL>

<P>
<A NAME="IDX3598"></A>
<A NAME="IDX3599"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>new_atom/1:</B>
<DD><A NAME="IDX3600"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>new_atom(Atom)</CODE>

<UL>
<LI><EM>Description:</EM> Returns, on success, a new atom, not existing before in the system. The entry argument must be a variable. The idea behind this atom generation is to provide a fast source of identifiers for new objects, concurrent predicates, etc. on the fly.

<LI><EM>The following properties should hold at call time:</EM>

<CODE>Atom</CODE> is a free variable.
 (<CODE>term_typing:var/1</CODE>)
<LI><EM>The following properties hold upon exit:</EM>

<CODE>Atom</CODE> is an atom.
 (<CODE>basic_props:atm/1</CODE>)
</UL>

</DL>



<H2><A NAME="SEC294" HREF="ciao_toc.html#TOC294">Documentation on internals (<CODE>prolog_sys</CODE>)</A></H2>
<P>
<A NAME="IDX3601"></A>
<A NAME="IDX3602"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>time_option/1:</B>
<DD><A NAME="IDX3603"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>time_option(M)</CODE>

<UL>
<LI><EM>Description:</EM> Options to get information about execution time. <CODE>M</CODE> must be one of <CODE>runtime</CODE>, <CODE>walltime</CODE>.

</UL>

</DL>

<P>
<A NAME="IDX3604"></A>
<A NAME="IDX3605"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>memory_option/1:</B>
<DD><A NAME="IDX3606"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>memory_option(M)</CODE>

<UL>
<LI><EM>Description:</EM> Options to get information about memory usage.

</UL>

</DL>

<P>
<A NAME="IDX3607"></A>
<A NAME="IDX3608"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>garbage_collection_option/1:</B>
<DD><A NAME="IDX3609"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>garbage_collection_option(M)</CODE>

<UL>
<LI><EM>Description:</EM> Options to get information about garbage collection.

</UL>

</DL>

<P>
<A NAME="IDX3610"></A>
<A NAME="IDX3611"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>symbol_option/1:</B>
<DD><A NAME="IDX3612"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>symbol_option(M)</CODE>

<UL>
<LI><EM>Description:</EM> Option to get information about the number of symbols in the program.

</UL>

</DL>

<P>
<A NAME="IDX3613"></A>
<A NAME="IDX3614"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>time_result/1:</B>
<DD><A NAME="IDX3615"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>time_result(Result)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Result</CODE> is a two-element list of integers. The first integer is the time since the start of the execution; the second integer is the time since the previous consult to time.

</UL>

</DL>

<P>
<A NAME="IDX3616"></A>
<A NAME="IDX3617"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>memory_result/1:</B>
<DD><A NAME="IDX3618"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>memory_result(Result)</CODE>

<UL>
<LI><EM>Description:</EM> Result is a two-element list of integers. The first element is the space taken up by the option selected, measured in bytes; the second integer is zero for program space (which grows as necessary), and the amount of free space otherwise.

</UL>

</DL>

<P>
<A NAME="IDX3619"></A>
<A NAME="IDX3620"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>gc_result/1:</B>
<DD><A NAME="IDX3621"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>gc_result(Result)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Result</CODE> is a tree-element list of integers, related to

<A NAME="IDX3622"></A>
garbage collection and 
<A NAME="IDX3623"></A>
memory management. When <CODE>stack_shifts</CODE> is selected, the first one is the number of shifts (reallocations) of the local stack; the second is the number of shifts of the trail, and the third is the time spent in these shifts. When <CODE>garbage_collection</CODE> is selected, the numbers are, respectively, the number of garbage collections performed, the number of bytes freed, and the time spent in garbage collection. 
</UL>

</DL>

<P>
<A NAME="IDX3624"></A>
<A NAME="IDX3625"></A>
<DL>
<DT><span class="define">REGTYPE:</span> <B>symbol_result/1:</B>
<DD><A NAME="IDX3626"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>symbol_result(Result)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Result</CODE> is a two-element list of integers. The first one is the number of atom, functor, and predicate names in the symbol table. The second is the number of predicates known to be defined (although maybe without clauses).

</UL>

</DL>



<H2><A NAME="SEC295" HREF="ciao_toc.html#TOC295">Known bugs and planned improvements (<CODE>prolog_sys</CODE>)</A></H2>


<UL>

<LI>

The space used by the process is not measured here: process data, code, and stack also take up memory. The memory reported for atoms is not what is actually used, but the space used up by the hash table (which is enlarged as needed).
</UL>

<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_68.html">previous</A>, <A HREF="ciao_70.html">next</A>, <A HREF="ciao_214.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
