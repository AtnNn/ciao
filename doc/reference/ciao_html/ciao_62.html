<HTML>
<HEAD>
<!-- Created by texi2html 1.56k + clip patches and <A href="http://www.clip.dia.fi.upm.es/Software">lpdoc</A> from ciao.texi on 11 July 2001 -->

<LINK rel="stylesheet" href="ciao.css" type="text/css">
<TITLE>The Ciao Prolog System               - Meta-properties</TITLE>
</HEAD>
<BODY> 
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_61.html">previous</A>, <A HREF="ciao_63.html">next</A>, <A HREF="ciao_216.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC271" HREF="ciao_toc.html#TOC271">Meta-properties</A></H1>
<P>
<A NAME="IDX3332"></A>


<P>
<STRONG>Author(s):</STRONG> Francisco Bueno.


<P>
This library allows the use of some meta-constructs which provide for specifying properties of terms which are unknown at the time of the specification, or expressed with a shorthand for the property definition, i.e., without really defining it. 


<P>
An example of such use is an assertion which specifies that any property holding upon call will also hold upon exit: 

<PRE>
         :- pred p(X) : Prop(X) =&#62; Prop(X).
</PRE>

<P>
Another example is using shorthands for properties when documenting: 

<PRE>
         :- pred p(X) : regtype(X,(^(list;list);list)).
</PRE>

<P>
(See below for an explanation of such a regular type.) 



<UL>
<LI><A HREF="ciao_62.html#SEC272">Usage and interface (meta_props)</A>
<LI><A HREF="ciao_62.html#SEC273">Documentation on exports (meta_props)</A>
<LI><A HREF="ciao_62.html#SEC274">Documentation on multifiles (meta_props)</A>
<LI><A HREF="ciao_62.html#SEC275">Documentation on internals (meta_props)</A>
<LI><A HREF="ciao_62.html#SEC276">Known bugs and planned improvements (meta_props)</A>
</UL>



<H2><A NAME="SEC272" HREF="ciao_toc.html#TOC272">Usage and interface (<CODE>meta_props</CODE>)</A></H2>

<div class="cartouche">

<UL>

<LI><STRONG>Library usage:</STRONG>

<CODE>:- use_module(library('assertions/meta_props'))</CODE> 

or also as a package <CODE>:- use_package(metaprops)</CODE>. 

Note the different names of the library and the package.

<LI><STRONG>Exports:</STRONG>


<UL>

<LI><EM>Properties:</EM>

<A NAME="IDX3333"></A>
<CODE>call/2</CODE>, 
<A NAME="IDX3334"></A>
<CODE>prop/2</CODE>, 
<A NAME="IDX3335"></A>
<CODE>regtype/2</CODE>.

<LI><EM>Multifiles:</EM>

<A NAME="IDX3336"></A>
<CODE>callme/2</CODE>.

</UL>

</UL>

</div class="cartouche">



<H2><A NAME="SEC273" HREF="ciao_toc.html#TOC273">Documentation on exports (<CODE>meta_props</CODE>)</A></H2>
<P>
<A NAME="IDX3337"></A>
<A NAME="IDX3338"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>call/2:</B>
<DD><A NAME="IDX3339"></A>


<P>
<CODE>call(P,A)</CODE>


<P>
<CODE>A</CODE> has property <CODE>P</CODE> (provided that <CODE>P</CODE> is a property). Equivalent to <CODE>P(A)</CODE>.


<P>
<STRONG>Usage:</STRONG> <CODE>call(P,A)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>A</CODE> has property <CODE>P</CODE>.

<LI><EM>If the following properties hold at call time:</EM>

<CODE>P</CODE> is a term which represents a goal, i.e., an atom or a structure.
 (<CODE>basic_props:callable/1</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX3340"></A>
<A NAME="IDX3341"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>prop/2:</B>
<DD><A NAME="IDX3342"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>prop(A,P)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>A</CODE> has property <CODE>P</CODE>.

<LI><EM>If the following properties hold at call time:</EM>

<CODE>P</CODE> has property <CODE>^ (callable;prop_abs)</CODE>.
 (<CODE>meta_props:prop/2</CODE>)
</UL>

</DL>

<P>
<A NAME="IDX3343"></A>
<A NAME="IDX3344"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>regtype/2:</B>
<DD><A NAME="IDX3345"></A>


<P>
<STRONG>Usage:</STRONG> <CODE>regtype(A,T)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>A</CODE> is of type <CODE>T</CODE>.

<LI><EM>If the following properties hold at call time:</EM>

<CODE>T</CODE> has property <CODE>^ (regtype;prop_abs)</CODE>.
 (<CODE>meta_props:prop/2</CODE>)
</UL>

</DL>



<H2><A NAME="SEC274" HREF="ciao_toc.html#TOC274">Documentation on multifiles (<CODE>meta_props</CODE>)</A></H2>
<P>
<A NAME="IDX3346"></A>
<A NAME="IDX3347"></A>
<DL>
<DT><span class="define">PREDICATE:</span> <B>callme/2:</B>
<DD><A NAME="IDX3348"></A>


<P>
(User defined.) A hook predicate you have to define as <CODE>callme(P,X):- P(X), !.</CODE> in the program that uses this library. This is done automatically if the package is used instead of the library module (but then you <EM>should not</EM> define <CODE>callme/2</CODE> in your program).


<P>
The predicate is <EM>multifile</EM>.


</DL>



<H2><A NAME="SEC275" HREF="ciao_toc.html#TOC275">Documentation on internals (<CODE>meta_props</CODE>)</A></H2>
<P>
<A NAME="IDX3349"></A>
<A NAME="IDX3350"></A>
<DL>
<DT><span class="define">PROPERTY:</span> <B>prop_abs/1:</B>
<DD><A NAME="IDX3351"></A>


<P>
<CODE>prop_abs(Prop)</CODE>


<P>
<CODE>Prop</CODE> is a 
<A NAME="IDX3352"></A>
<A NAME="IDX3353"></A>
<EM>property abstraction</EM>, i.e., a 
<A NAME="IDX3354"></A>
<A NAME="IDX3355"></A>
<EM>parametric property</EM>, or a term formed of property abstractions, where the functors used in the term are escaped by <CODE>^</CODE>. 


<P>
One particular case of property abstractions are 
<A NAME="IDX3356"></A>
<A NAME="IDX3357"></A>
<EM>parametric regular type abstractions</EM>, i.e., a parametric type functor or a <CODE>^</CODE>-escaped term formed of regular type abstractions. 


<P>
Such abstractions are a short-hand for a corresponding regular type (correspondingly, property). For example, the following abstraction: 

<PRE>
         ^(list;list);list
</PRE>

<P>
denotes terms of the form <CODE>(X;Y)</CODE> where <CODE>list(X)</CODE> and <CODE>list(Y)</CODE> hold and also terms <CODE>T</CODE> such that <CODE>list(T)</CODE> holds. It is equivalent to the regular type: 

<PRE>
         abstract_type((X;Y)):- list(X), list(Y).
         abstract_type(T):- list(T).
</PRE>

<P>
<STRONG>Usage:</STRONG> <CODE>prop_abs(Prop)</CODE>

<UL>
<LI><EM>Description:</EM> <CODE>Prop</CODE> is a

<A NAME="IDX3358"></A>
property abstraction. 
</UL>

</DL>



<H2><A NAME="SEC276" HREF="ciao_toc.html#TOC276">Known bugs and planned improvements (<CODE>meta_props</CODE>)</A></H2>


<UL>

<LI>

Using a hook predicate is not very elegant. Need something else.

<LI>

The cut in the hook prevents backtracking (enough for most uses of properties but not quite ok).
</UL>

<P><HR><P>
Go to the <A HREF="ciao_1.html">first</A>, <A HREF="ciao_61.html">previous</A>, <A HREF="ciao_63.html">next</A>, <A HREF="ciao_216.html">last</A> section, <A HREF="ciao_toc.html">table of contents</A>.
</BODY>
</HTML>
